{"id":".dotfiles-0b9","title":"Fix notification database schema mismatch - missing 'action_taken' column in getRecent query","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-27T18:38:53.406366-05:00","updated_at":"2025-12-27T18:43:23.305967-05:00","closed_at":"2025-12-27T18:43:23.305967-05:00","close_reason":"Closed","labels":["database","hammerspoon"]}
{"id":".dotfiles-155","title":"Critical notifications on primaryScreen","description":"Make critical/high urgency notifications always appear on hs.screen.primaryScreen() (external monitor) instead of following the focused window. Both the notification canvas and dimming overlay should use primaryScreen when urgency is critical/high (center position).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T11:03:10.402997-05:00","created_by":"seth","updated_at":"2026-01-05T11:06:04.728273-05:00","closed_at":"2026-01-05T11:06:04.728273-05:00","close_reason":"Implemented in commit: fix(hammerspoon): correct Fantastical bundleID and show critical notifications on primaryScreen"}
{"id":".dotfiles-1aq","title":"Design multi-agent coordination protocol","description":"Define protocols for multiple AI agents working simultaneously:\n\nScenarios to Handle:\n1. **Multiple Claude Code instances** on same machine\n2. **Parallel task execution** by same agent (Task tool subagents)\n3. **Sequential handoff** between agent sessions\n\nCoordination Mechanisms:\n1. **Lock files** - .jj-workspaces/$NAME.lock with PID\n   - Check before starting work\n   - Release on session end\n   - Stale lock detection\n\n2. **Bead task claiming** - bd update --status=in_progress --assignee=agent-1\n   - Prevents double-claiming\n   - Visible to other agents via bd list\n\n3. **Workspace reservation** - Metadata in workspace\n   - Who's working here?\n   - What task?\n   - Session start time\n\n4. **Conflict detection** - Pre-work check\n   - Are other workspaces touching same files?\n   - jj diff comparison across workspaces\n\n5. **Communication channel** - Shared state file\n   - .jj-workspaces/coordination.json\n   - Agent intents and status\n\nImplementation should be lightweight - agents can coordinate without heavy infrastructure.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T08:45:25.789508-05:00","updated_at":"2025-12-29T08:45:25.789508-05:00","labels":["ai-workflow","concurrency","workspace"],"dependencies":[{"issue_id":".dotfiles-1aq","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T08:45:25.799324-05:00","created_by":"daemon"}]}
{"id":".dotfiles-1cs","title":"starship-jj-workspace","description":"Evaluate and enhance Starship prompt to display jj workspace info","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T13:29:41.752846-05:00","updated_at":"2025-12-29T13:31:52.372909-05:00","closed_at":"2025-12-29T13:31:52.372909-05:00","close_reason":"Implemented workspace indicator in Starship prompt","labels":["jj","prompt","starship"]}
{"id":".dotfiles-1d4","title":"test-ws","description":"AI agent workspace task for test-ws","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T13:15:02.899858-05:00","updated_at":"2025-12-29T13:32:48.880801-05:00","closed_at":"2025-12-29T13:32:48.880801-05:00","close_reason":"Test workspace - cleaned up after validation","labels":["agent","workspace"]}
{"id":".dotfiles-1ic","title":"Create Hammerspoon reload cleanup hook","description":"Add a central cleanup mechanism in init.lua that calls cleanup() on all modules before hs.reload(). Modules should register their cleanup functions. This ensures watchers, timers, and canvases are properly released.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T18:03:13.560943-05:00","updated_at":"2025-12-29T15:25:29.86731-05:00","closed_at":"2025-12-29T15:25:29.86731-05:00","close_reason":"Implemented as part of memory leak fixes - cleanup hooks now registered and called on hs.reload()","labels":["architecture","hammerspoon","memory-leak"]}
{"id":".dotfiles-1ql","title":"Create agent-oriented workspace scripts (jj-ws-claim, jj-ws-complete)","description":"Create standalone scripts in ~/bin for AI agents to use programmatically.\n\nUnlike fish functions (human-oriented with fzf pickers), these are:\n- Machine-readable output (JSON or structured)\n- Clear exit codes\n- Bead task lifecycle integration\n- No interactive prompts\n\nScripts needed:\n- jj-ws-claim \u003ctask-id\u003e - Claim/create workspace for a bead task\n- jj-ws-complete - Mark task done, merge work, cleanup workspace\n- jj-ws-status - Machine-readable workspace state\n\nThese will be called by Claude, OpenCode, and other AI agents during their workflow.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T12:04:15.513853-05:00","updated_at":"2025-12-29T13:32:48.781858-05:00","closed_at":"2025-12-29T13:32:48.781858-05:00","close_reason":"Created bin/jj-ws-claim, bin/jj-ws-complete, bin/jj-ws-status with JSON output, bead integration, tmux window creation","labels":["ai-workflow","jj","scripts"],"dependencies":[{"issue_id":".dotfiles-1ql","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T12:04:15.520475-05:00","created_by":"daemon"}]}
{"id":".dotfiles-1rd","title":"Standardize module pattern across Hammerspoon config","description":"Inconsistent module patterns: some use 'local M = {}', others use 'local obj = {}' with unused __index. Standardize on simple 'local M = {}' pattern without unnecessary metatable setup. Remove unused M.__index and M.name declarations.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:02:43.284235-05:00","updated_at":"2025-12-27T18:02:43.284235-05:00","labels":["code-quality","hammerspoon"]}
{"id":".dotfiles-1zf","title":"Implement visor-style slide animation for notes scratchpad","description":"Research and implement smooth slide-down animation for notes scratchpad visor mode. Current attempt using hs.window:setFrame() with duration doesn't work - macOS may clamp windows to screen bounds preventing off-screen positioning. Consider alternatives: hs.canvas overlay, or native window animation APIs.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T09:03:35.389927-05:00","updated_at":"2025-12-30T09:03:35.389927-05:00","labels":["animation","hammerspoon","phase-5","polish"]}
{"id":".dotfiles-20n","title":"JJ Workspaces + Bead Workflow for Concurrent AI Agent Development","description":"Enable concurrent AI agent and developer workflows using jj workspaces for VCS isolation and bead for task coordination. This epic addresses:\n\n1. **JJ Workspace Infrastructure** - Set up workspace management patterns for this repo and provide reusable patterns for other repos\n2. **Bead Integration** - Establish conventions for workspace-specific bead epics/tasks and cross-workspace synchronization  \n3. **AI Agent Workflow Rules** - Define clear protocols for agents operating in workspaces to avoid conflicts\n4. **Developer Experience** - Scripts, aliases, and documentation to make workspace workflows frictionless\n\nKey Goals:\n- Multiple AI agents can work concurrently without stomping on each other's changes\n- Each workspace gets its own bead epic/task context\n- Clear handoff protocols between workspaces and agents\n- Easy workspace lifecycle management (create, work, merge, cleanup)\n\nResearch Complete: See _docs/jj-workspaces-research.md for comprehensive findings on jj workspace architecture, lock-free concurrency model, conflict handling, and best practices.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-29T08:43:32.746854-05:00","updated_at":"2025-12-29T08:43:32.746854-05:00","labels":["ai-workflow","bead","concurrency","epic","jj"]}
{"id":".dotfiles-2lu","title":"Research libghostty embedding for custom notes app","description":"Research and document libghostty embedding for a custom Swift-based notes capture app. Goals: (1) Understand build requirements, (2) Document C API usage, (3) Create minimal proof-of-concept, (4) Evaluate viability vs VimR/Neovide approaches.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T10:00:58.037052-05:00","updated_at":"2025-12-30T13:08:40.568155-05:00","closed_at":"2025-12-30T13:08:40.568155-05:00","close_reason":"MegaNote built and working - Swift CLI using libghostty with Hammerspoon integration, auto-detect binary, IPC via distributed notifications"}
{"id":".dotfiles-32b","title":"Fix inconsistent EDITOR/VISUAL/JJ_EDITOR configuration","description":"Editor environment variables are configured in multiple conflicting places, causing tools like jj to fail when opening editors.\n\nCurrent State (broken):\n- EDITOR=nvim (just binary name)\n- VISUAL=/nix/store/.../nvim (full nix path)\n- JJ_EDITOR=(empty)\n- GIT_EDITOR=$EDITOR\n\nSources of Conflict:\n1. hosts/megabookpro.nix:61-63 - Sets EDITOR to pkgs.nvim-nightly/bin/nvim\n2. home/zsh/lib/env.zsh:93 - Sets EDITOR='nvim -O' (with -O flag!)\n3. home/programs/nvim.nix:42 - defaultEditor = true (may also set things)\n4. JJ_EDITOR - Never explicitly set\n\nProblem Discovered:\n- jj split failed because editor didn't work properly\n- Concurrent AI agent changes got wrong commit messages\n- nvim client/server mode (from notes system) may have changed expected behavior\n\nRequired Fix:\n1. Consolidate editor config in ONE place (probably nix)\n2. Remove conflicting zsh env.zsh EDITOR override\n3. Set JJ_EDITOR explicitly (may need different behavior than git)\n4. Test that all tools work: jj, git, bd, fish edit_command_buffer\n5. Ensure nvim client/server mode doesn't break interactive editing\n\nRelated: Notes \u0026 Capture system may have changed nvim startup behavior","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-29T08:54:57.499263-05:00","updated_at":"2025-12-29T08:54:57.499263-05:00","labels":["bug","dx","jj","nix","nvim"]}
{"id":".dotfiles-3ra","title":"Remove duplicate logging in notification hot path","description":"In notification.lua:382-388, both print() and U.log.nf() are called on every notification with similar format strings. Remove the print() call or consolidate to single logging approach.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:03:01.739539-05:00","updated_at":"2025-12-27T18:03:01.739539-05:00","labels":["hammerspoon","performance"]}
{"id":".dotfiles-3rc","title":"Create jj-workspace skill for AI agent workflow awareness","description":"Create a skill (docs/skills/jj-workspace.md) that AI agents can invoke to understand:\n\n- When to create/claim a workspace\n- How to use jj-ws-* scripts\n- Bead task integration patterns\n- Multi-agent coordination rules\n- Workspace lifecycle management\n\nThis skill should be usable by Claude Code, OpenCode, and other AI tools.\nDepends on agent scripts (.dotfiles-1ql) being complete.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T12:04:28.988264-05:00","updated_at":"2025-12-29T12:04:28.988264-05:00","labels":["ai-workflow","jj","skill"],"dependencies":[{"issue_id":".dotfiles-3rc","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T12:04:28.997875-05:00","created_by":"daemon"}]}
{"id":".dotfiles-4el","title":"Configure Hammerspoon PATH for Nix/Homebrew binaries","description":"Hammerspoon doesn't inherit shell PATH, requiring absolute paths to binaries (nvim, kitty, ghostty). Find a clean solution to inject Nix/Homebrew paths so we can use simple binary names instead of hardcoded paths like /opt/homebrew/bin/kitty or /run/current-system/sw/bin/nvim.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T11:10:46.837799-05:00","updated_at":"2025-12-26T12:23:12.803943-05:00","closed_at":"2025-12-26T12:23:12.803943-05:00","close_reason":"Implemented PATH injection via monkey-patched hs.task.new in overrides.lua. Nix generates nix_path.lua to ~/.local/share/hammerspoon/ on darwin-rebuild.","labels":["dx","hammerspoon","nix","path"]}
{"id":".dotfiles-5lx","title":"Fix obsidian.nvim deprecation warnings and API changes","description":"Fixed multiple issues: 1) Deprecated 'mappings' config replaced with 'callbacks.enter_note', 2) util module replaced with api module, 3) cursor_on_markdown_link() replaced with api.cursor_link(), 4) Added gr keybinding that works on frontmatter tags and body tags","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T17:06:58.233137-05:00","updated_at":"2025-12-27T17:07:03.819703-05:00","closed_at":"2025-12-27T17:07:03.819703-05:00","close_reason":"Fixed in config/nvim/lua/plugins/obsidian.lua and config/nvim/after/plugin/notes.lua","labels":["nvim","obsidian"]}
{"id":".dotfiles-5vb","title":"Add consistent error handling to pcall patterns","description":"Some pcall() calls properly check return values, others ignore them entirely. Example: notifier.lua:143 uses pcall without checking success. Standardize on 'local ok, err = pcall(...)' pattern and handle errors.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:02:45.083377-05:00","updated_at":"2025-12-27T18:02:45.083377-05:00","labels":["error-handling","hammerspoon"]}
{"id":".dotfiles-5y6","title":"Create bead-workspace integration pattern","description":"Design and implement patterns for integrating bead issue tracking with jj workspaces:\n\nCore Pattern:\n- Each workspace can be associated with a bead epic or task\n- Workspace creation can auto-create/link to bead task\n- Workspace cleanup can update bead task status\n\nImplementation Ideas:\n1. **Workspace metadata file**: .jj-workspace-bead.json in workspace root\n   - Contains linked bead issue ID\n   - Auto-updated by jj-ws-* scripts\n\n2. **Bead workspace label**: Add 'workspace:$NAME' label to tasks\n   - Easy filtering: bd list --labels='workspace:agent-1'\n\n3. **Auto-context injection**: bd prime could include workspace-specific context\n   - Which workspace am I in?\n   - What's my assigned task?\n\n4. **Cross-workspace task visibility**: \n   - bd list should work from any workspace\n   - Show workspace assignments in output\n\nResearch needed:\n- How does bead handle multiple concurrent readers/writers?\n- Does bead need sandbox mode in workspaces?","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-29T08:44:32.922278-05:00","updated_at":"2025-12-29T08:44:32.922278-05:00","labels":["bead","integration","jj","workspace"],"dependencies":[{"issue_id":".dotfiles-5y6","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T08:44:32.933147-05:00","created_by":"daemon"}]}
{"id":".dotfiles-6bp","title":"[Phase 5] Add window position persistence","description":"Save/restore notes window position via hs.settings. Handle multi-monitor and off-screen scenarios.","status":"closed","priority":3,"issue_type":"task","estimated_minutes":30,"created_at":"2025-12-26T10:35:59.656222-05:00","updated_at":"2025-12-30T09:14:09.346669-05:00","closed_at":"2025-12-30T09:14:09.346669-05:00","close_reason":"Window positioning and smooth toggle complete: centered float with explicit Kitty dimensions, separate instances for daily/capture notes. Visor animations deferred to separate task (.dotfiles-1zf).","labels":["hammerspoon","phase-5","polish"],"dependencies":[{"issue_id":".dotfiles-6bp","depends_on_id":".dotfiles-ca8","type":"blocks","created_at":"2025-12-26T10:35:59.657071-05:00","created_by":"daemon"},{"issue_id":".dotfiles-6bp","depends_on_id":".dotfiles-ckn","type":"blocks","created_at":"2025-12-26T20:54:09.752167-05:00","created_by":"daemon"}]}
{"id":".dotfiles-6ct","title":"Handle colocated repo workspace limitations","description":"Address known issues with jj workspaces in colocated (jj+git) repos:\n\nKnown Issues:\n1. **Secondary workspaces lack .git file** - Tools expecting git repos may fail\n2. **git commands don't work in secondary workspaces** - Must use jj only\n3. **IDE git integrations can cause stale workspaces** - Background fetches\n4. **Performance degrades with many git refs** - Need periodic jj util gc\n\nPotential Mitigations:\n1. **Disable IDE git in workspace dirs** - .vscode/settings.json, etc.\n2. **Create wrapper scripts** that warn about git usage\n3. **Add pre-command hook** to check for git command usage in workspaces\n4. **Document which tools need git** and alternatives\n\nResearch:\n- Is there a way to create .git file for secondary workspaces? (jj discussion #6286)\n- Can we symlink or stub the .git for compatibility?\n\nThis may require accepting limitations rather than full solutions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T08:45:00.830762-05:00","updated_at":"2025-12-29T08:45:00.830762-05:00","labels":["git","jj","workaround","workspace"],"dependencies":[{"issue_id":".dotfiles-6ct","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T08:45:00.841606-05:00","created_by":"daemon"}]}
{"id":".dotfiles-71b","title":"statusline-jj-support","description":"AI agent workspace task for statusline-jj-support","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:56:54.988508-05:00","updated_at":"2025-12-30T14:06:02.510195-05:00","closed_at":"2025-12-30T14:06:02.510195-05:00","close_reason":"Completed: removed tmux window creation from jj-ws-claim and jj-ws-complete","labels":["agent","workspace"]}
{"id":".dotfiles-7dz","title":"Define workspace naming conventions and directory structure","description":"Establish clear conventions for workspace organization:\n\nNaming Pattern: $REPO-$PURPOSE[-$AGENT]\nExamples:\n- dotfiles-auth-refactor\n- dotfiles-test-runner\n- dotfiles-agent-1\n- dotfiles-docs-update\n\nDirectory Structure:\n- Main workspace: ~/.dotfiles (contains .jj/store/)\n- Secondary workspaces: ~/.dotfiles-$NAME (siblings, not children!)\n\nWhy siblings not children:\n- Avoids nested workspace footgun (jj issue #6102)\n- Cleaner separation\n- Some tools scan subdirectories\n\nReserved names:\n- 'main' or 'default' for primary workspace\n- 'ci-*' for CI/CD workspaces\n- 'agent-*' for AI agent workspaces\n\nDocument in CLAUDE.md for AI agents to follow.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T08:44:30.588357-05:00","updated_at":"2025-12-29T11:11:04.557731-05:00","closed_at":"2025-12-29T11:11:04.557731-05:00","close_reason":"Created _docs/jj-workspace-conventions.md with colocated .workspaces/ pattern","labels":["conventions","documentation","jj","workspace"],"dependencies":[{"issue_id":".dotfiles-7dz","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T08:44:30.59899-05:00","created_by":"daemon"}]}
{"id":".dotfiles-8a7","title":"Extend Hammerspoon env injection for NOTES_HOME","description":"Extended nix_path.lua to export NIX_ENV table with critical env vars (NOTES_HOME, OBSIDIAN_HOME, NVIM_DB_HOME, DOTS, XDG_*). Updated overrides.lua to inject these into spawned processes. Fixes nvim config errors when launched via Hammerspoon hotkeys.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T17:06:46.105735-05:00","updated_at":"2025-12-27T17:06:51.241449-05:00","closed_at":"2025-12-27T17:06:51.241449-05:00","close_reason":"Implemented in home/default.nix, overrides.lua, and preflight.lua","labels":["env","hammerspoon","nix"]}
{"id":".dotfiles-8g2","title":"Shade: Update Hammerspoon integration for MegaNote → Shade rename","description":"Update Hammerspoon configuration to work with the renamed Shade app.\n\n## Related\n- Shade repo epic: shade-141 (in ~/code/MegaNote → ~/code/shade)\n\n## Scope\n- Rename interop/meganote.lua → interop/shade.lua\n- Update IPC notifications: com.meganote.* → io.shade.*\n- Update binary paths and process names\n- Add io.shade.note.capture handler (write context.json, send notification)\n- Add io.shade.note.daily handler\n- Update keybindings\n- Update notes.lua to use new module\n\n## Future (Phase 2+)\n- Remove global hotkey registration if Shade handles it\n- Remove context gathering if Shade handles it\n- Vision/OCR integration hooks\n\n## XDG Paths\nHammerspoon will write context to:\n~/.local/state/shade/context.json","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-07T09:06:35.362099-05:00","created_by":"seth","updated_at":"2026-01-07T09:06:35.362099-05:00"}
{"id":".dotfiles-8g2.1","title":"Rename interop/meganote.lua to interop/shade.lua and update all references","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T10:09:21.282408-05:00","created_by":"seth","updated_at":"2026-01-07T10:19:33.460276-05:00","closed_at":"2026-01-07T10:19:33.460276-05:00","close_reason":"Closed","dependencies":[{"issue_id":".dotfiles-8g2.1","depends_on_id":".dotfiles-8g2","type":"parent-child","created_at":"2026-01-07T10:09:21.286033-05:00","created_by":"seth"}]}
{"id":".dotfiles-8g2.10","title":"[Validate] Test socket path coordination - verify Option A works or need Option B","description":"Socket coordination question from planning session:\n\n**Option A (current approach)**: Hammerspoon passes command with --listen ~/.local/state/shade/nvim.sock\n**Option B (alternative)**: Shade injects --listen into whatever command is passed\n\nWe're starting with Option A. This task is to verify:\n1. Does nvim actually listen on the socket when launched this way?\n2. Can Shade's NvimRPC successfully communicate with it?\n3. If not, do we need Option B (Shade handles socket setup)?\n\nContext: Shade expects socket at StateDirectory.nvimSocketPath (~/.local/state/shade/nvim.sock)\nThe command passed from Hammerspoon needs to include: nvim --listen ~/.local/state/shade/nvim.sock","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-07T10:09:29.291451-05:00","created_by":"seth","updated_at":"2026-01-08T14:58:50.398123-05:00","closed_at":"2026-01-08T14:58:50.398128-05:00","dependencies":[{"issue_id":".dotfiles-8g2.10","depends_on_id":".dotfiles-8g2","type":"parent-child","created_at":"2026-01-07T10:09:29.292073-05:00","created_by":"seth"}]}
{"id":".dotfiles-8g2.11","title":"Shade: subsequent daily note presses open empty nvim","description":"When pressing Hyper+Shift+O multiple times:\n1. First press works - opens daily note in Shade\n2. User does :wq or hides Shade\n3. Second press opens empty nvim instead of daily note\n\nNeed to investigate:\n- Is nvim still running after hide? (should be)\n- Is socket still valid?\n- Is openFile() RPC succeeding?\n- Is the issue in Hammerspoon or Shade?\n\nPossibly related to socket cleanup or backgrounding logic.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-07T14:30:02.193339-05:00","created_by":"seth","updated_at":"2026-01-07T15:03:19.757784-05:00","closed_at":"2026-01-07T15:03:19.757786-05:00","dependencies":[{"issue_id":".dotfiles-8g2.11","depends_on_id":".dotfiles-8g2","type":"parent-child","created_at":"2026-01-07T14:30:02.19414-05:00","created_by":"seth"}]}
{"id":".dotfiles-8g2.12","title":"Shade: restore focus to previous window on hide","description":"When Shade panel hides (via toggle, hide IPC, or Cmd+Escape):\n- Should restore focus to the window that was focused before Shade was shown\n- Currently just calls orderOut(nil) which leaves focus in limbo\n\nImplementation needed in Shade (Swift):\n- Track previous app/window before showing panel\n- Restore focus to it on hide\n\nThis affects both capture and daily note workflows - user expects to return to their previous context after dismissing Shade.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-07T14:30:09.739725-05:00","created_by":"seth","updated_at":"2026-01-07T14:30:09.739725-05:00","dependencies":[{"issue_id":".dotfiles-8g2.12","depends_on_id":".dotfiles-8g2","type":"parent-child","created_at":"2026-01-07T14:30:09.740408-05:00","created_by":"seth"}]}
{"id":".dotfiles-8g2.2","title":"Update IPC notifications from com.meganote.* to io.shade.*","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T10:09:22.026199-05:00","created_by":"seth","updated_at":"2026-01-07T10:19:33.530097-05:00","closed_at":"2026-01-07T10:19:33.530097-05:00","close_reason":"Closed","dependencies":[{"issue_id":".dotfiles-8g2.2","depends_on_id":".dotfiles-8g2","type":"parent-child","created_at":"2026-01-07T10:09:22.026943-05:00","created_by":"seth"}]}
{"id":".dotfiles-8g2.3","title":"Update binary paths and process detection for shade","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T10:09:23.044817-05:00","created_by":"seth","updated_at":"2026-01-07T10:19:33.597402-05:00","closed_at":"2026-01-07T10:19:33.597402-05:00","close_reason":"Closed","dependencies":[{"issue_id":".dotfiles-8g2.3","depends_on_id":".dotfiles-8g2","type":"parent-child","created_at":"2026-01-07T10:09:23.045483-05:00","created_by":"seth"}]}
{"id":".dotfiles-8g2.4","title":"Update socket path to ~/.local/state/shade/nvim.sock","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T10:09:24.078221-05:00","created_by":"seth","updated_at":"2026-01-07T10:19:43.932244-05:00","closed_at":"2026-01-07T10:19:43.932244-05:00","close_reason":"Closed","dependencies":[{"issue_id":".dotfiles-8g2.4","depends_on_id":".dotfiles-8g2","type":"parent-child","created_at":"2026-01-07T10:09:24.078807-05:00","created_by":"seth"}]}
{"id":".dotfiles-8g2.5","title":"Add io.shade.note.capture handler (write context.json, send notification)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T10:09:25.579264-05:00","created_by":"seth","updated_at":"2026-01-07T10:19:44.041404-05:00","closed_at":"2026-01-07T10:19:44.041404-05:00","close_reason":"Closed","dependencies":[{"issue_id":".dotfiles-8g2.5","depends_on_id":".dotfiles-8g2","type":"parent-child","created_at":"2026-01-07T10:09:25.579989-05:00","created_by":"seth"}]}
{"id":".dotfiles-8g2.6","title":"Add io.shade.note.daily handler","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T10:09:26.090667-05:00","created_by":"seth","updated_at":"2026-01-07T10:19:44.11025-05:00","closed_at":"2026-01-07T10:19:44.11025-05:00","close_reason":"Closed","dependencies":[{"issue_id":".dotfiles-8g2.6","depends_on_id":".dotfiles-8g2","type":"parent-child","created_at":"2026-01-07T10:09:26.091309-05:00","created_by":"seth"}]}
{"id":".dotfiles-8g2.7","title":"Update keybindings to use shade module","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T10:09:26.57389-05:00","created_by":"seth","updated_at":"2026-01-07T10:19:44.180711-05:00","closed_at":"2026-01-07T10:19:44.180711-05:00","close_reason":"Closed","dependencies":[{"issue_id":".dotfiles-8g2.7","depends_on_id":".dotfiles-8g2","type":"parent-child","created_at":"2026-01-07T10:09:26.574469-05:00","created_by":"seth"}]}
{"id":".dotfiles-8g2.8","title":"Update notes.lua to use new shade module","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T10:09:27.076615-05:00","created_by":"seth","updated_at":"2026-01-07T10:19:44.252656-05:00","closed_at":"2026-01-07T10:19:44.252656-05:00","close_reason":"Closed","dependencies":[{"issue_id":".dotfiles-8g2.8","depends_on_id":".dotfiles-8g2","type":"parent-child","created_at":"2026-01-07T10:09:27.077216-05:00","created_by":"seth"}]}
{"id":".dotfiles-8g2.9","title":"Rename MEGANOTE=1 env var to SHADE=1","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-07T10:09:28.034911-05:00","created_by":"seth","updated_at":"2026-01-07T10:19:44.322049-05:00","closed_at":"2026-01-07T10:19:44.322049-05:00","close_reason":"Closed","dependencies":[{"issue_id":".dotfiles-8g2.9","depends_on_id":".dotfiles-8g2","type":"parent-child","created_at":"2026-01-07T10:09:28.035547-05:00","created_by":"seth"}]}
{"id":".dotfiles-8nx","title":"Migrate note system to obsidian.nvim-native workflows","description":"Migrate daily notes, quick capture, and task management from shell scripts + Hammerspoon to obsidian.nvim-native templates and Lua functions.\n\n## Progress Summary (as of 2026-01-07)\n\n### COMPLETED\n- [x] Templates created at $NOTES_HOME/templates/ (daily.md, capture-text.md, capture-image.md)\n- [x] obsidian.nvim config updated with custom substitutions:\n  - migrated_tasks: extracts incomplete tasks from previous daily note\n  - yesterday_link: generates link to previous daily note  \n  - capture_context: builds collapsible callout with app/url/file context\n  - capture_selection: wraps selection in code fence with detected language\n  - date_id, timestamp: date formatting helpers\n- [x] Obsidian app configured to match nvim (daily-notes.json, templates.json)\n- [x] Context injection reads from ~/.local/state/shade/context.json\n\n### REMAINING\n- [ ] .dotfiles-8nx.5: Update Hammerspoon to use :ObsidianToday and :ObsidianNew commands\n- [ ] .dotfiles-8nx.7: Migrate notes from old vault (_notes 2) to new vault (_notes)\n- [ ] .dotfiles-8nx.6: Deprecate daily_note shell script\n\n## Key Files Modified\n- config/nvim/lua/plugins/obsidian.lua - Template substitutions and config\n- $NOTES_HOME/templates/daily.md - Daily note template\n- $NOTES_HOME/templates/capture-text.md - Text capture template  \n- $NOTES_HOME/templates/capture-image.md - Image capture template\n- $NOTES_HOME/.obsidian/daily-notes.json - Obsidian app daily notes config\n- $NOTES_HOME/.obsidian/templates.json - Obsidian app templates config\n\n## Architecture Notes\n- Shade writes context.json before triggering capture\n- obsidian.nvim substitutions read context.json at template insertion time\n- Capture linking to daily note handled by BufWritePost autocmd in autocmds.lua:779-838\n- ## Captures section created dynamically on first capture (not in template)","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-07T14:48:48.653865-05:00","created_by":"seth","updated_at":"2026-01-07T15:18:49.654071-05:00"}
{"id":".dotfiles-8nx.1","title":"Create templates directory and base templates in vault","description":"Create $NOTES_HOME/templates/ directory with:\n- daily.md - Daily note template with frontmatter and sections\n- capture-text.md - Text capture template with context placeholders\n- capture-image.md - Image capture template with OCR placeholder\n\nTemplates should use obsidian.nvim's {{date}}, {{title}} built-ins plus custom substitutions.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T14:50:52.796939-05:00","created_by":"seth","updated_at":"2026-01-07T14:51:44.894679-05:00","closed_at":"2026-01-07T14:51:44.894679-05:00","close_reason":"Closed","dependencies":[{"issue_id":".dotfiles-8nx.1","depends_on_id":".dotfiles-8nx","type":"parent-child","created_at":"2026-01-07T14:50:52.797823-05:00","created_by":"seth"}]}
{"id":".dotfiles-8nx.2","title":"Implement task migration substitution function","description":"Add custom template substitution to obsidian.nvim config for task migration:\n\ntemplates.substitutions = {\n  migrated_tasks = function()\n    -- Find yesterday's daily note\n    -- Extract incomplete tasks (- [ ])\n    -- Return formatted task list\n  end\n}\n\nMust handle edge cases: no previous note, no tasks, weekend gaps.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T14:50:54.110352-05:00","created_by":"seth","updated_at":"2026-01-07T14:53:44.051526-05:00","closed_at":"2026-01-07T14:53:44.051526-05:00","close_reason":"Closed","dependencies":[{"issue_id":".dotfiles-8nx.2","depends_on_id":".dotfiles-8nx","type":"parent-child","created_at":"2026-01-07T14:50:54.111779-05:00","created_by":"seth"}]}
{"id":".dotfiles-8nx.3","title":"Add context injection substitution for captures","description":"Add substitutions that read from Shade's context.json:\n\n- context_source - Browser URL or file path\n- context_app - Source application name\n- context_title - Window/tab title\n- context_selection - Selected text (for text captures)\n\nRead from ~/.local/state/shade/context.json","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T14:50:55.206417-05:00","created_by":"seth","updated_at":"2026-01-07T14:53:44.202593-05:00","closed_at":"2026-01-07T14:53:44.202593-05:00","close_reason":"Closed","dependencies":[{"issue_id":".dotfiles-8nx.3","depends_on_id":".dotfiles-8nx","type":"parent-child","created_at":"2026-01-07T14:50:55.20759-05:00","created_by":"seth"}]}
{"id":".dotfiles-8nx.4","title":"Update obsidian.nvim config with new templates and substitutions","description":"Update config/nvim/lua/plugins/obsidian.lua:\n\n1. Set templates.folder = 'templates'\n2. Set daily_notes.template = 'daily.md'\n3. Add all custom substitutions\n4. Ensure frontmatter.func preserves custom fields","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T14:50:56.430788-05:00","created_by":"seth","updated_at":"2026-01-07T14:53:44.127491-05:00","closed_at":"2026-01-07T14:53:44.127491-05:00","close_reason":"Closed","dependencies":[{"issue_id":".dotfiles-8nx.4","depends_on_id":".dotfiles-8nx","type":"parent-child","created_at":"2026-01-07T14:50:56.431671-05:00","created_by":"seth"}]}
{"id":".dotfiles-8nx.5","title":"Update Hammerspoon to use obsidian.nvim commands","description":"Update lib/interop/shade.lua and lib/notes.lua to use obsidian.nvim commands instead of direct file creation.\n\n## What's Done\n- obsidian.nvim config updated with custom template substitutions\n- Templates created at $NOTES_HOME/templates/ (daily.md, capture-text.md, capture-image.md)\n- Obsidian app configured to match (daily-notes.json, templates.json)\n\n## What Needs to Change\n\n### lib/interop/shade.lua\n- Daily note handler: Send `:ObsidianToday` via nvim RPC instead of running daily_note script\n- The template substitutions (migrated_tasks, yesterday_link) handle task migration automatically\n\n### lib/notes.lua  \n- Text capture: Instead of creating file directly, use `:ObsidianNew` with capture-text template\n- Image capture: Instead of creating file directly, use `:ObsidianNew` with capture-image template\n- The capture_context and capture_selection substitutions read from ~/.local/state/shade/context.json\n- Daily note linking is handled by nvim autocmd on BufWritePost (config/nvim/lua/config/autocmds.lua:779-838)\n\n### Key Files\n- config/hammerspoon/lib/interop/shade.lua\n- config/hammerspoon/lib/notes.lua\n- config/nvim/lua/plugins/obsidian.lua (already updated)\n- config/nvim/lua/config/autocmds.lua (capture linking autocmd exists)\n\n## Testing\n1. Trigger daily note via Shade - should open today's note with migrated tasks\n2. Text capture with selection - should create note with context callout\n3. Image capture - should create note with image embed\n4. Verify captures appear in daily note's ## Captures section","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T14:50:57.75774-05:00","created_by":"seth","updated_at":"2026-01-07T16:12:47.250991-05:00","closed_at":"2026-01-07T16:12:47.250991-05:00","close_reason":"Implemented and tested. All three workflows verified:\n1. Daily note (:ObsidianToday) - creates/opens daily note at correct path\n2. Text capture (:Obsidian new_from_template capture-text) - zettel+descriptor filename, code block with selection, collapsible context callout\n3. Image capture (:Obsidian new_from_template capture-image) - reads imageFilename from context.json, embeds image, context callout\n\nNote: Full interactive testing blocked by Shade shift-key bug (shade-s7p), but nvim server tests confirm the obsidian.nvim integration works correctly.","dependencies":[{"issue_id":".dotfiles-8nx.5","depends_on_id":".dotfiles-8nx","type":"parent-child","created_at":"2026-01-07T14:50:57.758979-05:00","created_by":"seth"}]}
{"id":".dotfiles-8nx.6","title":"Deprecate daily_note shell script","description":"After migration is tested:\n\n1. Remove bin/daily_note or rename to daily_note.deprecated\n2. Update any remaining references\n3. Document new workflow in README or notes","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-07T14:50:58.699578-05:00","created_by":"seth","updated_at":"2026-01-07T14:51:06.341259-05:00","dependencies":[{"issue_id":".dotfiles-8nx.6","depends_on_id":".dotfiles-8nx","type":"parent-child","created_at":"2026-01-07T14:50:58.700432-05:00","created_by":"seth"}]}
{"id":".dotfiles-8nx.7","title":"Migrate notes from old vault to new format","description":"Migrate notes from ~/iclouddrive/Documents/_notes 2 to ~/iclouddrive/Documents/_notes\n\n## Source (old vault)\n- Path: ~/iclouddrive/Documents/_notes 2\n- Daily notes: daily/YYYY-MM-DD.md (flat, with dashes)\n- Captures: captures/*.md\n- Assets: assets/*\n- Other notes: *.md in root\n\n## Target (new vault)\n- Path: ~/iclouddrive/Documents/_notes\n- Daily notes: daily/YYYY/YYYYMMDD.md (year subfolder, no dashes)\n- Captures: captures/*.md (same)\n- Assets: assets/* (same)\n- Templates: templates/*.md (new)\n\n## Migration steps\n1. Copy assets/ directory\n2. Copy captures/ directory\n3. Migrate daily notes:\n   - Rename YYYY-MM-DD.md -\u003e YYYYMMDD.md\n   - Move into year subfolders (daily/YYYY/)\n   - Update frontmatter id format if present\n   - Update internal links to daily notes\n4. Copy other root-level .md files (ADHD.md, ENG.md, etc.)\n5. Copy .obsidian/ config and update daily-notes.json to match new format\n6. Verify all wiki links still resolve\n7. Remove old vault after verification","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T15:16:12.017299-05:00","created_by":"seth","updated_at":"2026-01-07T15:16:12.017299-05:00","dependencies":[{"issue_id":".dotfiles-8nx.7","depends_on_id":".dotfiles-8nx","type":"parent-child","created_at":"2026-01-07T15:16:12.018256-05:00","created_by":"seth"}]}
{"id":".dotfiles-8nx.8","title":"Update image capture template to read imageFilename from context.json","description":"The image_filename substitution in obsidian.lua currently returns a literal placeholder. Update it to:\n\n1. Read imageFilename from ~/.local/state/shade/context.json\n2. Hammerspoon (clipper.lua) should write imageFilename to context.json before triggering capture\n3. Template will then properly embed the image with ![[filename.png]]\n\nThis mirrors how capture_context already works - reading from the shared context file.\n\nRelated: The capture_context substitution already renders as a collapsible callout, so image captures will get the same treatment as text captures for source metadata.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T15:42:46.838107-05:00","created_by":"seth","updated_at":"2026-01-07T15:42:53.529796-05:00","dependencies":[{"issue_id":".dotfiles-8nx.8","depends_on_id":".dotfiles-8nx","type":"parent-child","created_at":"2026-01-07T15:42:46.838825-05:00","created_by":"seth"}]}
{"id":".dotfiles-8uo","title":"[Phase 3] Create nvim autocmd for daily note linking","description":"BufWritePost autocmd for captures/ files. Skip empty files. Append wikilink to daily note ## Captures section.\n\nImplementation complete - pending questions before final test:\n- Different separators in description? (currently using \" · \")\n- Include timestamp in description?\n- Truncate description at different length? (currently 60 chars)\n- Different fallback text? (currently \"Text capture\")","status":"closed","priority":2,"issue_type":"task","estimated_minutes":45,"created_at":"2025-12-26T10:35:59.457437-05:00","updated_at":"2025-12-26T17:41:02.320001-05:00","closed_at":"2025-12-26T17:41:02.320001-05:00","close_reason":"Implemented and tested. Fixed language detection, added source context to frontmatter, smart filenames, duplicate prevention, and simplified image capture entries.","labels":["nvim","obsidian","phase-3"],"dependencies":[{"issue_id":".dotfiles-8uo","depends_on_id":".dotfiles-wpc","type":"blocks","created_at":"2025-12-26T10:35:59.458333-05:00","created_by":"daemon"}]}
{"id":".dotfiles-8uu","title":"Move MegaNote to ~/code/ and update paths","description":"Move MegaNote project from ~/src/ to ~/code/ and update all references:\n- Update meganote.lua appPath config\n- Update Package.swift ghostty path (relative to new location)\n- Clean and rebuild\n- Verify Hammerspoon integration still works","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T12:45:29.525206-05:00","updated_at":"2025-12-30T12:46:26.866998-05:00","closed_at":"2025-12-30T12:46:26.866998-05:00","close_reason":"Project moved to ~/code/MegaNote, Package.swift and meganote.lua paths updated, build verified","labels":["meganote hammerspoon"]}
{"id":".dotfiles-8wi","title":"Canonize jj workspace docs to docs/knowledge/","description":"Once the jj workspace workflow is fully vetted and complete:\n\n1. Merge _docs/jj-workspaces-research.md and _docs/jj-workspace-conventions.md\n2. Create consolidated docs/knowledge/jj-workspace-workflow.md\n3. Include:\n   - Architecture overview (operation log, lock-free concurrency)\n   - .workspaces/ directory structure\n   - Naming conventions\n   - Lifecycle (create, work, merge, cleanup)\n   - Shell integration and aliases\n   - AI agent workflow rules\n   - Troubleshooting\n\nThis is the final step after all other epic tasks are complete and workflow is battle-tested.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-29T11:12:21.174915-05:00","updated_at":"2025-12-29T11:12:21.174915-05:00","labels":["docs","jj","workflow"],"dependencies":[{"issue_id":".dotfiles-8wi","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T11:12:21.183028-05:00","created_by":"daemon"}]}
{"id":".dotfiles-91b","title":"Remove dead code from bindings.lua","description":"bindings.lua has ~200 lines of commented-out code (lines 151-192, 449-480, 485-641). Delete these blocks to improve maintainability. Also remove unused assertKeyAvailable function at line 662.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T18:02:31.980637-05:00","updated_at":"2026-01-02T10:10:17.529796-05:00","closed_at":"2026-01-02T10:10:17.529796-05:00","close_reason":"Removed ~170 lines of dead code: old meeting impl comments, AX debugging code, unused alt WM implementation block, and assertKeyAvailable function","labels":["cleanup","code-quality","hammerspoon"]}
{"id":".dotfiles-97v","title":"MegaNote cleanup and polish","description":"Cleanup tasks for MegaNote:\n- Remove debug print statements or make them conditional\n- Add proper error handling\n- Consider adding --verbose flag for debug output\n- Review memory management in Swift/ghostty integration","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T12:45:31.794737-05:00","updated_at":"2025-12-30T13:15:36.943128-05:00","closed_at":"2025-12-30T13:15:36.943128-05:00","close_reason":"Added --verbose flag for conditional logging, replaced all print() with Log utility (debug/info/warn/error), verified build. Identified cleanup opportunities (Optional.withCStringOrNil helper, hide() log consolidation) and test opportunities (AppConfig parsing tests) for future work.","labels":["meganote cleanup"]}
{"id":".dotfiles-9bb","title":"Implement holistic jj workspace context propagation","description":"Implement consistent jj workspace context across all tools in the stack.\n\nResearch documented in: _docs/jj-workspace-tooling-research.md\n\nKey integrations needed:\n- Tmux: One WINDOW per workspace within a project session\n- Fish: Prompt shows workspace name, jj-ws-* functions\n- Neovim: Statusline + Telescope picker for workspaces\n- Ghostty/terminal: Title reflects workspace\n- Starship (if used): Workspace in prompt\n\nCore challenge: Detecting 'am I in a jj workspace, and which one?' and exposing that to all tools consistently.\n\nInspiration: workmux pattern (tmux IS the interface, one command creates workspace + window)\n\nThis is follow-up work after core scripts (.dotfiles-c4d) are complete.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T11:52:41.777663-05:00","updated_at":"2025-12-29T11:52:41.777663-05:00","labels":["fish","integration","jj","neovim","tmux"],"dependencies":[{"issue_id":".dotfiles-9bb","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T11:52:41.781799-05:00","created_by":"daemon"}]}
{"id":".dotfiles-a1f","title":"Create jj workspace shell integration (prompt/statusline)","description":"Enhance shell prompt/statusline to show workspace context:\n\nCurrent State:\n- Statusline shows jj bookmark and change_id\n- No indication of which workspace\n\nDesired State:\n- Show workspace name when not in default workspace\n- Show stale indicator if workspace is stale\n- Show linked bead task ID\n\nImplementation Options:\n1. **Starship prompt module** - If using starship\n2. **Custom shell function** - For prompt PS1\n3. **Hammerspoon statusline** - Already have jj integration\n\nFormat suggestion: jj:workspace-name@bookmark* (change_id)\nExample: jj:agent-1@feat-auth* (abc123)\n\nAlso consider:\n- Color coding for workspace state (normal, stale, conflicted)\n- Quick command to show full workspace info","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T08:45:02.37166-05:00","updated_at":"2025-12-29T13:32:48.851194-05:00","closed_at":"2025-12-29T13:32:48.851194-05:00","close_reason":"Added workspace indicator to Starship custom.jj module - shows workspace name in cyan when in non-default workspace","labels":["dx","jj","shell","workspace"],"dependencies":[{"issue_id":".dotfiles-a1f","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T08:45:02.382114-05:00","created_by":"daemon"}]}
{"id":".dotfiles-aie","title":"m8o-agent-workflow","description":"AI agent workspace task for m8o-agent-workflow","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T14:09:17.300965-05:00","updated_at":"2025-12-29T14:09:17.300965-05:00","labels":["agent","workspace"]}
{"id":".dotfiles-alq","title":"AI Systems Refactor: Orchestration, Skills, Agents, and Secure Remote Communication","description":"Deep refactor of AI configuration systems (.dotfiles AI infrastructure) to establish:\n\n1. **'dots' Orchestrator** - Central agent that understands the entire dotfiles ecosystem and auto-routes to specialized skills/agents\n2. **Auto-routing** - Automatic detection and delegation based on keywords (nix, hammerspoon, nvim, tmux, shade, etc.)\n3. **Specialized Skills \u0026 Agents** - Deep expertise modules for each subsystem\n4. **Secure Telegram Integration** - Real-time bidirectional communication for remote monitoring and interaction\n5. **Token Efficiency** - Reduce context bloat, improve precision, eliminate hallucinations\n6. **Cross-tool Compatibility** - Works with both claude-code and opencode\n\nResearch areas:\n- Anthropic best practices for skills/agents\n- OpenCode documentation and patterns\n- Community discoveries (X/Twitter, GitHub)\n- MCP ecosystem patterns\n- Prompt engineering research\n- Real-world production setups\n- Telegram bot security best practices","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-08T14:28:53.189939-05:00","created_by":"seth","updated_at":"2026-01-08T14:28:53.189939-05:00"}
{"id":".dotfiles-alq.1","title":"Research: Anthropic claude-code best practices for skills, agents, and memory","description":"Deep dive into Anthropic's documentation and community patterns for:\n- Skill file structure and content optimization\n- Agent definition best practices\n- Memory system usage patterns\n- Token efficiency strategies\n- When to use skills vs agents vs inline instructions\n\nSources: Anthropic docs, GitHub claude-code issues/discussions, community examples","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T14:29:03.583289-05:00","created_by":"seth","updated_at":"2026-01-08T15:05:01.533451-05:00","closed_at":"2026-01-08T15:05:01.533457-05:00","dependencies":[{"issue_id":".dotfiles-alq.1","depends_on_id":".dotfiles-alq","type":"parent-child","created_at":"2026-01-08T14:29:03.583924-05:00","created_by":"seth"}]}
{"id":".dotfiles-alq.2","title":"Research: OpenCode architecture, skills, agents, and MCP integration","description":"Deep dive into OpenCode's documentation and implementation:\n- Skill file format differences from claude-code\n- Agent spawning patterns\n- MCP server integration\n- Custom tool development\n- Configuration best practices\n\nSources: OpenCode GitHub repo, docs, issues, community examples","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T14:29:13.272571-05:00","created_by":"seth","updated_at":"2026-01-08T15:05:01.593349-05:00","closed_at":"2026-01-08T15:05:01.593352-05:00","dependencies":[{"issue_id":".dotfiles-alq.2","depends_on_id":".dotfiles-alq","type":"parent-child","created_at":"2026-01-08T14:29:13.27323-05:00","created_by":"seth"}]}
{"id":".dotfiles-alq.3","title":"Research: Secure Telegram bot integration for AI agent communication","description":"Research secure patterns for bidirectional Telegram integration:\n- Telegram Bot API security best practices\n- Self-hosted vs cloud options\n- Authentication and authorization patterns\n- Session management for multiple concurrent AI sessions\n- End-to-end encryption considerations\n- Rate limiting and abuse prevention\n- Integration with existing ntfy notification system\n\nGoal: Enable remote monitoring and interaction with AI agents via Telegram while maintaining security","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-08T14:29:19.940552-05:00","created_by":"seth","updated_at":"2026-01-08T15:01:16.625074-05:00","dependencies":[{"issue_id":".dotfiles-alq.3","depends_on_id":".dotfiles-alq","type":"parent-child","created_at":"2026-01-08T14:29:19.941221-05:00","created_by":"seth"}]}
{"id":".dotfiles-alq.4","title":"Research: Community patterns and production setups (Twitter/X, GitHub, forums)","description":"Gather real-world patterns from:\n- Twitter/X discussions about claude-code, cursor, windsurf, aider setups\n- GitHub repos with advanced AI tool configurations\n- Reddit r/LocalLLaMA, r/ChatGPT discussions\n- Discord communities\n- Blog posts and tutorials\n\nFocus on:\n- Token reduction strategies\n- Hallucination prevention\n- Context management\n- Multi-agent orchestration patterns\n- Real production configurations","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T14:29:26.089794-05:00","created_by":"seth","updated_at":"2026-01-08T14:29:26.089794-05:00","dependencies":[{"issue_id":".dotfiles-alq.4","depends_on_id":".dotfiles-alq","type":"parent-child","created_at":"2026-01-08T14:29:26.090466-05:00","created_by":"seth"}]}
{"id":".dotfiles-alq.5","title":"Design: 'dots' orchestrator architecture and auto-routing system","description":"Based on research findings, design the orchestrator system:\n- Central 'dots' agent/skill that understands dotfiles ecosystem\n- Auto-routing logic for keyword detection (nix, hammerspoon, nvim, etc.)\n- Delegation patterns to specialized agents\n- Fallback behaviors\n- Integration with both claude-code and opencode\n\nDeliverable: Architecture document and implementation plan","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-08T14:29:31.818971-05:00","created_by":"seth","updated_at":"2026-01-08T14:29:31.818971-05:00","dependencies":[{"issue_id":".dotfiles-alq.5","depends_on_id":".dotfiles-alq","type":"parent-child","created_at":"2026-01-08T14:29:31.819586-05:00","created_by":"seth"}]}
{"id":".dotfiles-alq.6","title":"Audit: Current ai.nix, skills, agents - identify bloat and inefficiencies","description":"Analyze current AI configuration for:\n- Redundant instructions across files\n- Overly verbose content consuming tokens\n- Missing critical guidance that causes errors\n- Inconsistencies between claude-code and opencode configs\n- Skills that should be agents (or vice versa)\n- Memory/context that could be externalized\n\nDeliverable: Audit report with specific recommendations","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-08T14:29:38.650876-05:00","created_by":"seth","updated_at":"2026-01-08T15:07:40.807776-05:00","dependencies":[{"issue_id":".dotfiles-alq.6","depends_on_id":".dotfiles-alq","type":"parent-child","created_at":"2026-01-08T14:29:38.651616-05:00","created_by":"seth"}]}
{"id":".dotfiles-alq.7","title":"Create specialized skills: hammerspoon, nvim, tmux, shade","description":"Create deep-knowledge skills for key subsystems:\n- hammerspoon skill (Lua, macOS APIs, our specific config patterns)\n- nvim skill (our plugin setup, keybindings, LSP config)\n- tmux skill (our session management, layouts)\n- shade skill (Swift, notification patterns, nvim RPC)\n\nEach skill should be:\n- Concise but comprehensive\n- Include our specific patterns and conventions\n- Cross-reference related systems\n- Optimized for token efficiency","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-08T14:29:44.776476-05:00","created_by":"seth","updated_at":"2026-01-08T14:29:44.776476-05:00","dependencies":[{"issue_id":".dotfiles-alq.7","depends_on_id":".dotfiles-alq","type":"parent-child","created_at":"2026-01-08T14:29:44.77716-05:00","created_by":"seth"}]}
{"id":".dotfiles-alq.8","title":"Implement Telegram bot bridge for AI agent communication","description":"Based on research findings, implement secure Telegram integration:\n- Bot setup and configuration\n- Bridge service (likely a small daemon)\n- Session tracking for multiple concurrent AI sessions\n- Integration with ntfy for unified notification routing\n- Security hardening\n- Nix packaging for the service\n\nDeliverable: Working Telegram bot that enables bidirectional AI communication","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-08T14:29:50.814787-05:00","created_by":"seth","updated_at":"2026-01-08T14:29:50.814787-05:00","dependencies":[{"issue_id":".dotfiles-alq.8","depends_on_id":".dotfiles-alq","type":"parent-child","created_at":"2026-01-08T14:29:50.815456-05:00","created_by":"seth"}]}
{"id":".dotfiles-alq.9","title":"Refactor ai.nix for token efficiency and clarity","description":"Based on audit and research:\n- Restructure ai.nix for clarity\n- Extract verbose instructions to skills/agents\n- Optimize memory.text for token efficiency\n- Ensure consistency between claude-code and opencode\n- Add safeguards against common mistakes (push without permission, etc.)\n- Document the new structure\n\nDeliverable: Refactored ai.nix with measurably reduced token usage","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-08T14:29:56.594108-05:00","created_by":"seth","updated_at":"2026-01-08T14:29:56.594108-05:00","dependencies":[{"issue_id":".dotfiles-alq.9","depends_on_id":".dotfiles-alq","type":"parent-child","created_at":"2026-01-08T14:29:56.594828-05:00","created_by":"seth"}]}
{"id":".dotfiles-als","title":"hs-memory-leaks","description":"AI agent workspace task for hs-memory-leaks","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T13:41:56.432402-05:00","updated_at":"2026-01-02T10:13:54.428938-05:00","closed_at":"2026-01-02T10:13:54.428938-05:00","close_reason":"Fixed hyper.lua:stop() using wrong key for _G.Hypers cleanup. No major memory leaks found - watchers/timers have proper cleanup, state.lua has good reset patterns. Minor: S.hypers exists but unused (relates to uho task).","labels":["agent","workspace"]}
{"id":".dotfiles-b3r","title":"Improve function naming for clarity","description":"Several unclear function names: M.toggle() - toggle what?; findWindowByTitle() returns single window not list; tableCount() should use stdlib. Rename for intention-revealing names per clean code principles.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:03:00.429094-05:00","updated_at":"2025-12-27T18:03:00.429094-05:00","labels":["code-quality","hammerspoon"]}
{"id":".dotfiles-bww","title":"Fix nested timer accumulation in dismissNotification","description":"In notifier.lua:279-301, nested hs.timer.doAfter inside doUntil can orphan timers when dismissNotification is called rapidly. Store reference and cancel previous before creating new. Location: lib/notifications/notifier.lua dismissNotification()","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T18:02:17.898907-05:00","updated_at":"2025-12-29T15:15:12.972911-05:00","closed_at":"2025-12-29T15:15:12.972911-05:00","close_reason":"Fixed in commit pushed to main - nested timer accumulation resolved by centralizing notification state with S.notification","labels":["hammerspoon","memory-leak"]}
{"id":".dotfiles-c4d","title":"Create workspace management scripts (jj-ws-*)","description":"Create helper scripts for common workspace operations:\n\nScripts needed:\n1. **jj-ws-new** - Create new workspace with standard naming/location\n   - Args: workspace-name, optional base-revision\n   - Creates at ../$REPO-$NAME (outside repo tree to avoid issues)\n   - Sets up bead context for the workspace\n   \n2. **jj-ws-list** - Enhanced workspace listing\n   - Shows workspace name, path, current commit, stale status\n   - Integrates with bead to show associated epic/task\n   \n3. **jj-ws-cleanup** - Clean up completed workspace\n   - Forgets workspace\n   - Removes directory\n   - Updates bead task status if linked\n\n4. **jj-ws-switch** - Quick workspace switching\n   - Tab completion for workspace names\n   - Updates shell prompt/statusline\n\nLocation: ~/bin/ (already in PATH via nix)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T08:44:29.43327-05:00","updated_at":"2025-12-29T13:32:48.819327-05:00","closed_at":"2025-12-29T13:32:48.819327-05:00","close_reason":"Created fish functions: jj-ws-new, jj-ws-switch, jj-ws-list, jj-ws-rm in home/programs/fish.nix","labels":["dx","jj","scripts","workspace"],"dependencies":[{"issue_id":".dotfiles-c4d","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T08:44:29.443536-05:00","created_by":"daemon"}]}
{"id":".dotfiles-ca8","title":"[Phase 3] Verify obsidian.nvim backlinks work","description":"Test obsidian.nvim backlinks between capture notes and daily notes. Verify navigation works.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":15,"created_at":"2025-12-26T10:35:59.557261-05:00","updated_at":"2025-12-26T20:50:13.101087-05:00","closed_at":"2025-12-26T20:50:13.101087-05:00","close_reason":"Verified and enhanced. Added note_frontmatter_func to preserve capture metadata, picker tag mappings, smart gf/\u003ccr\u003e mappings, and unified gr keybinding for tags/links/LSP references.","labels":["nvim","obsidian","phase-3"],"dependencies":[{"issue_id":".dotfiles-ca8","depends_on_id":".dotfiles-8uo","type":"blocks","created_at":"2025-12-26T10:35:59.558086-05:00","created_by":"daemon"}]}
{"id":".dotfiles-cb1","title":"Investigate GPG signed commits not working","description":"GPG signed commits were working in the archived dotfiles-nix repo but are not working in this repo (.dotfiles).\n\nNeed to investigate:\n- Compare git config between repos (user.signingkey, commit.gpgsign, gpg.program)\n- Check if GPG key is still valid and available\n- Verify gpg-agent is running and configured correctly\n- Check if 1Password SSH agent integration is interfering\n- Compare .gitconfig or home-manager git module settings\n- Test with git log --show-signature on old repo vs this one\n\nReference: Previous working config was in dotfiles-nix repo (now archived)","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-29T09:53:50.215454-05:00","updated_at":"2026-01-03T12:27:10.012071-05:00","closed_at":"2026-01-03T12:27:10.012071-05:00","close_reason":"GPG signing was working all along - just needed allowedSignersFile for verification. Added via home.file.text in home/default.nix","labels":["git","gpg"]}
{"id":".dotfiles-ckn","title":"[Phase 4] User testing and real-world usage validation","description":"Use the Notes \u0026 Capture System in daily workflow. Test:\n- Text capture from browser (verify app name, window title, language in frontmatter)\n- Text capture from terminal/nvim\n- Image capture flow\n- Daily note linking (verify no duplicates, proper formatting)\n- obsidian.nvim backlinks navigation\n- Unified gr keybinding (tags vs links vs LSP)\n- Smart \u003ccr\u003e and gf mappings\n\nReport any issues found for Phase 5 fixes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T20:54:01.167553-05:00","updated_at":"2026-01-01T17:32:34.035637-05:00","closed_at":"2026-01-01T17:32:34.035637-05:00","close_reason":"Phase 4 testing complete - moving to Phase 5 cleanup","labels":["phase-4","testing"]}
{"id":".dotfiles-cwn","title":"Fix application watcher never stopped on reload","description":"In lib/notifications/notifier.lua:316-333, the application watcher is started on module load but never stopped. Add stop logic to cleanup function and call it before hs.reload(). Location: notifier.lua setupAppWatcher()","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T18:02:16.760137-05:00","updated_at":"2025-12-29T15:15:14.773337-05:00","closed_at":"2025-12-29T15:15:14.773337-05:00","close_reason":"Fixed in commit pushed to main - application watcher now properly stopped on reload via cleanup hook","labels":["critical","hammerspoon","memory-leak"]}
{"id":".dotfiles-d8h","title":"[Phase 2] Create lib/interop/selection.lua wrapper","description":"Lua wrapper for bin/get-selection. Call via hs.task.new(), parse JSON, handle errors gracefully.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":30,"created_at":"2025-12-26T10:35:59.258017-05:00","updated_at":"2025-12-26T11:07:28.416287-05:00","closed_at":"2025-12-26T11:07:28.416287-05:00","close_reason":"Created lib/interop/selection.lua wrapper with async callback API","labels":["hammerspoon","lua","phase-2"],"dependencies":[{"issue_id":".dotfiles-d8h","depends_on_id":".dotfiles-vd5","type":"blocks","created_at":"2025-12-26T10:35:59.258897-05:00","created_by":"daemon"}]}
{"id":".dotfiles-dat","title":"Document MegaNote project","description":"Create comprehensive documentation for MegaNote:\n- README.md with project overview, architecture, usage\n- justfile with build/dev/clean tasks\n- Document libghostty integration gotchas\n- Document Hammerspoon IPC protocol\n- Installation instructions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T12:45:30.513253-05:00","updated_at":"2025-12-30T12:59:14.328792-05:00","closed_at":"2025-12-30T12:59:14.328792-05:00","close_reason":"Updated README with CLI architecture, release builds, justfile targets; added flake.nix for Nix packaging","labels":["meganote documentation"]}
{"id":".dotfiles-ddn","title":"Migrate jj workspace workflow to global agent awareness","description":"After validating the jj workspace workflow in .dotfiles:\n\n1. Update global CLAUDE.md (~/.claude/CLAUDE.md) with workflow rules\n2. Create global skill accessible from any project\n3. Ensure OpenCode and other AI tools can use the workflow\n4. Document how to enable workspace workflow in new repos\n\nThis is the final migration step after all other epic tasks are validated.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-29T12:04:29.039411-05:00","updated_at":"2025-12-29T12:04:29.039411-05:00","labels":["ai-workflow","global","migration"],"dependencies":[{"issue_id":".dotfiles-ddn","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T12:04:29.044827-05:00","created_by":"daemon"}]}
{"id":".dotfiles-dlr","title":"Add cleanup methods to notifier module","description":"Add M.cleanup() function to lib/notifications/notifier.lua that stops _G.notificationAppWatcher, deletes _G.notificationOverlay canvas, and clears all timer references. Critical for preventing memory leaks on reload.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T18:02:15.598605-05:00","updated_at":"2025-12-29T15:15:15.9319-05:00","closed_at":"2025-12-29T15:15:15.9319-05:00","close_reason":"Fixed in commit pushed to main - notifier module now has proper cleanup methods called on reload","labels":["critical","hammerspoon","memory-leak"]}
{"id":".dotfiles-dm7","title":"Notes \u0026 Capture System","description":"Unified note-taking and capture system integrating Hammerspoon, Neovim (obsidian.nvim), and a floating Kitty terminal window for seamless capture workflows across the system.\n\nGoals:\n- Quick capture of text/ideas from anywhere on the system\n- Context-aware capture (grab selected text + source metadata without clipboard pollution)\n- Floating notes window that persists and toggles cleanly\n- Integration with daily notes via obsidian.nvim\n\nArchitecture:\n- Floating notes terminal: Kitty with persistent nvim session\n- Main terminal: Ghostty (tmux) - unchanged\n- Window management: Hammerspoon toggle with previousApp restore\n- Context capture: Swift script via Accessibility API (no clipboard)\n- Note storage: Obsidian vault with obsidian.nvim","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-26T10:34:58.50616-05:00","updated_at":"2025-12-27T17:36:01.618571-05:00","closed_at":"2025-12-27T17:36:01.618571-05:00","close_reason":"Core features complete. Capture system fully functional: persistent nvim session, clipboard-free selection via Accessibility API, text/image capture workflows, daily note integration, obsidian.nvim backlinks. Phase 5 polish tasks remain open for future refinement.","labels":["hammerspoon","notes","nvim","obsidian"]}
{"id":".dotfiles-ex2","title":"nvim-socket-fallback","description":"AI agent workspace task for nvim-socket-fallback","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:38:58.815043-05:00","updated_at":"2025-12-30T16:01:18.821702-05:00","closed_at":"2025-12-30T16:01:18.821702-05:00","close_reason":"Implemented global_{pid} socket fallback for non-tmux nvim instances. Detection cascade: tmux → frontmost app → most recent global socket.","labels":["agent","workspace"]}
{"id":".dotfiles-fdx","title":"Add LaunchDaemon to increase maxfiles limit for nix builds","description":"Nix builds fail with 'Too many open files' due to macOS default maxfiles limit of 256.\n\nRoot Cause:\n- macOS launchctl soft limit defaults to 256\n- Complex nix evaluations open many files (git packfiles, store paths)\n- No declarative kernel parameter config on modern macOS\n\nSolution:\n- Create LaunchDaemon via nix-darwin that runs 'launchctl limit maxfiles 524288 524288' at boot\n- This is Apple's officially recommended approach (no alternative exists)\n\nImplementation:\n- Add launchd.daemons.limit-maxfiles to modules/system.nix\n- Set both soft and hard limits to 524288 (512K)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T09:32:41.433874-05:00","updated_at":"2025-12-29T09:33:30.977042-05:00","closed_at":"2025-12-29T09:33:30.977042-05:00","close_reason":"Implemented in modules/system.nix - creates LaunchDaemon that sets maxfiles to 524288 at boot","labels":["darwin","dx","launchd","nix"]}
{"id":".dotfiles-hr2","title":"Split watchers/notification.lua into smaller modules","description":"notification.lua (825 lines) has too many responsibilities. Split into: notification-observer.lua (AX observer), notification-matcher.lua (rule matching), notification-actions.lua (dismiss/redirect). Each module should have single responsibility.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:03:11.640881-05:00","updated_at":"2025-12-27T18:03:11.640881-05:00","labels":["architecture","hammerspoon","refactor"]}
{"id":".dotfiles-ivz","title":"[Phase 5] Error handling and edge cases","description":"Handle: Kitty not installed, nvim socket unresponsive, get-selection fails, directory not writable, window stuck state. Add logging and graceful degradation.","status":"open","priority":3,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-26T10:35:59.870144-05:00","updated_at":"2025-12-26T10:35:59.870144-05:00","labels":["hammerspoon","phase-5","polish"],"dependencies":[{"issue_id":".dotfiles-ivz","depends_on_id":".dotfiles-ca8","type":"blocks","created_at":"2025-12-26T10:35:59.871088-05:00","created_by":"daemon"},{"issue_id":".dotfiles-ivz","depends_on_id":".dotfiles-ckn","type":"blocks","created_at":"2025-12-26T20:54:09.575095-05:00","created_by":"daemon"}]}
{"id":".dotfiles-j47","title":"hs-slow-reload","description":"AI agent workspace task for hs-slow-reload","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T14:13:46.552286-05:00","updated_at":"2026-01-02T10:02:30.509722-05:00","closed_at":"2026-01-02T10:02:30.509722-05:00","close_reason":"Eliminated window filter from scratchpad.lua by refactoring: created lib/interop/kitty.lua, lib/notes/window.lua, moved meganote to interop/, deleted scratchpad.lua (712 lines). See commit e0858fa.","labels":["agent","workspace"]}
{"id":".dotfiles-jod","title":"[Future] Create Neovide-based toggle as Kitty alternative","description":"Native macOS window alternative to Kitty terminal. Neovide already installed. Compare reliability and performance.","status":"closed","priority":4,"issue_type":"feature","estimated_minutes":120,"created_at":"2025-12-26T10:35:59.973888-05:00","updated_at":"2025-12-26T15:14:02.918563-05:00","closed_at":"2025-12-26T15:14:02.918563-05:00","close_reason":"Abandoned after testing - neovide socket reliability issues, sticking with Kitty","labels":["future","neovide"]}
{"id":".dotfiles-lp4","title":"Extract magic numbers to config.lua","description":"Multiple magic numbers in code: minHeight=100, maxHeight=400 in notifier.lua; depth limits of 6 and 8 in notification.lua tree traversal. Move to C.notifier.canvas.* and C.notifier.axTreeMaxDepth.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:02:44.2798-05:00","updated_at":"2025-12-27T18:02:44.2798-05:00","labels":["hammerspoon","maintainability"]}
{"id":".dotfiles-m8o","title":"Define AI agent workspace workflow rules for CLAUDE.md","description":"Add comprehensive workspace workflow rules to CLAUDE.md for AI agents:\n\nRules to document:\n\n1. **Workspace Awareness**\n   - Check if in a workspace at session start\n   - Understand workspace isolation scope\n   - Know which files are shared vs isolated\n\n2. **Pre-Work Protocol**\n   - Check jj workspace list for context\n   - Check for stale workspace state\n   - Identify linked bead task\n\n3. **During Work**\n   - Stay within workspace scope\n   - Don't modify shared configs unless intentional\n   - Use jj commands exclusively (no git in workspaces)\n\n4. **Conflict Avoidance**\n   - Communicate intent before touching shared files\n   - Check if another workspace is modifying same area\n   - Prefer narrower file scopes\n\n5. **Handoff Protocol**\n   - Document work state before leaving workspace\n   - Update bead task status\n   - Note any pending conflicts for resolution\n\n6. **Merge Protocol**\n   - When workspace work is complete\n   - How to rebase onto main\n   - How to handle conflicts\n\nInclude concrete examples and error recovery procedures.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-29T08:44:58.431147-05:00","updated_at":"2025-12-29T08:44:58.431147-05:00","labels":["ai-workflow","claude","documentation","workspace"],"dependencies":[{"issue_id":".dotfiles-m8o","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T08:44:58.441398-05:00","created_by":"daemon"}]}
{"id":".dotfiles-mkm","title":"Image capture context enrichment via recognition/OCR","description":"Enhance image captures with intelligent context extraction:\n\n- Detect frontmost app when screenshot is taken (app name, window title)\n- OCR text visible in the screenshot for searchable content\n- Image classification/summarization for descriptive filenames\n- Pass enriched context to the capture note frontmatter\n\nThis would enable smarter naming like '20251226-1730-github-pr-review.png' instead of generic timestamps, and make captures more searchable via extracted text.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-26T17:40:03.974062-05:00","updated_at":"2025-12-26T17:40:03.974062-05:00","labels":["phase-6"]}
{"id":".dotfiles-n5m","title":"Add sparse checkout patterns for large repos","description":"Document and implement sparse checkout patterns for workspace efficiency:\n\nUse Cases:\n- Monorepo with multiple packages\n- Large repos where agents only need subset of files\n- Performance optimization for workspace creation\n\nJJ Sparse Commands:\n- jj workspace add --sparse-patterns=empty - Start empty\n- jj sparse set --add 'path/to/dir/**' - Add specific paths\n- jj sparse list - View current patterns\n\nPattern Examples for Dotfiles:\n- config/hammerspoon/** - Just Hammerspoon work\n- home/programs/** - Just home-manager configs\n- modules/** - Just nix-darwin modules\n\nDocumentation:\n- When to use sparse workspaces\n- Pattern syntax\n- Caveats (some operations need full tree)\n\nLower priority - dotfiles repo is small, but valuable for other repos.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-29T08:45:27.04485-05:00","updated_at":"2025-12-29T08:45:27.04485-05:00","labels":["jj","performance","workspace"],"dependencies":[{"issue_id":".dotfiles-n5m","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T08:45:27.0554-05:00","created_by":"daemon"}]}
{"id":".dotfiles-ngc","title":"[Phase 5] Code cleanup and refactoring for maintainability","description":"Review and refactor the Notes \u0026 Capture System code for maintainability:\n\nPotential areas to address:\n- lib/notes.lua: Large file, may need splitting into focused modules\n- lib/interop/scratchpad.lua: Complex toggle logic, could simplify\n- config/nvim/after/plugin/notes.lua: Growing autocmd file, review organization\n- Consolidate duplicate patterns across capture workflows\n- Add documentation/comments where logic is non-obvious\n- Review error handling consistency\n- Consider extracting shared utilities\n\nGoal: Make the codebase approachable for future modifications without deep context.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T17:35:54.678127-05:00","updated_at":"2025-12-27T17:35:54.678127-05:00","labels":["hammerspoon","nvim","phase-5","polish"]}
{"id":".dotfiles-pqf","title":"Fix beads persistence - remove global .beads gitignore","description":"The global gitignore at ~/.dotfiles/home/git/gitignore lines 128-129 ignores the entire .beads/ directory:\n\n```\n.beads\n**/.beads\n```\n\nThis breaks beads persistence because:\n1. issues.jsonl (source of truth) is never committed\n2. Issues exist only in local SQLite DB\n3. Issues lost on fresh clone, machine switch, or .beads/ deletion\n\nThe Fix (Option A - Recommended):\nRemove lines 128-129 from ~/.dotfiles/home/git/gitignore\n\nThe .beads/.gitignore inside each repo already handles ignoring SQLite files, daemon files, etc. Only issues.jsonl, interactions.jsonl, config.yaml, and README.md would be tracked.\n\nIntended workflow:\n- Create issue → SQLite updated → Auto-export to issues.jsonl → git commit/push\n- Pull from remote → Auto-import from issues.jsonl → SQLite updated\n\nAfter fix: Run `bd sync` in repos to ensure JSONL files are current, then commit them.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T15:57:12.790633-05:00","created_by":"seth","updated_at":"2026-01-07T16:00:26.013396-05:00","closed_at":"2026-01-07T16:00:26.013396-05:00","close_reason":"Fixed by removing .beads and **/.beads from global gitignore at home/git/gitignore. Rebuild applied the change. Each repo's .beads/.gitignore handles ignoring SQLite/daemon files while tracking issues.jsonl."}
{"id":".dotfiles-pvi","title":"[Phase 1] Implement persistent nvim session with --remote","description":"Change scratchpad from spawning new nvim per-launch to single persistent session. First launch: nvim --listen /tmp/notes.sock. Subsequent: nvim --server ... --remote \u003cfile\u003e.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-26T10:35:59.156162-05:00","updated_at":"2025-12-26T12:51:24.113062-05:00","closed_at":"2025-12-26T12:51:24.113062-05:00","close_reason":"Implemented persistent nvim session with --listen/--server/--remote. Ghostty macOS fix discovered (use open -na instead of direct CLI).","labels":["hammerspoon","nvim","phase-1"]}
{"id":".dotfiles-qur","title":"Cache require() calls in notification hot paths","description":"In watchers/notification.lua, require('lib.notifications.db') and require('lib.notifications.menubar') are called inside handleNotification() on every notification. Move to module-level cache to reduce overhead.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T18:02:30.371012-05:00","updated_at":"2025-12-27T18:02:30.371012-05:00","labels":["hammerspoon","performance"]}
{"id":".dotfiles-rrs","title":"Create workspace template for new repos","description":"Create reusable templates/scripts for enabling workspace workflows in any repo:\n\nComponents:\n1. **Init script** - Set up workspace-aware jj config for a repo\n   - Creates .jj-workspaces/ tracking directory (gitignored)\n   - Adds recommended jj config\n   - Sets up bead integration hooks\n\n2. **CLAUDE.md template section** - Copy-paste workspace rules\n   - AI agent workspace protocols\n   - jj workspace command reference\n   - Conflict resolution procedures\n\n3. **justfile targets** - Common workspace operations\n   - just ws-new $NAME\n   - just ws-list\n   - just ws-cleanup $NAME\n\n4. **CI/CD templates** - For workspace-aware CI\n   - GitHub Actions with workspace isolation\n   - Test matrix across workspaces\n\nLocation: Could be a separate repo or template directory in dotfiles.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T08:45:24.49844-05:00","updated_at":"2025-12-29T08:45:24.49844-05:00","labels":["dx","jj","template","workspace"],"dependencies":[{"issue_id":".dotfiles-rrs","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T08:45:24.504954-05:00","created_by":"daemon"}]}
{"id":".dotfiles-sj6","title":"[Phase 5] Add smooth toggle animations","description":"Slide-in/slide-out animations for notes window toggle. Make configurable and disable-able.","status":"closed","priority":3,"issue_type":"task","estimated_minutes":45,"created_at":"2025-12-26T10:35:59.769766-05:00","updated_at":"2025-12-30T09:14:09.351941-05:00","closed_at":"2025-12-30T09:14:09.351941-05:00","close_reason":"Window positioning and smooth toggle complete: centered float with explicit Kitty dimensions, separate instances for daily/capture notes. Visor animations deferred to separate task (.dotfiles-1zf).","labels":["hammerspoon","phase-5","polish"],"dependencies":[{"issue_id":".dotfiles-sj6","depends_on_id":".dotfiles-ca8","type":"blocks","created_at":"2025-12-26T10:35:59.7707-05:00","created_by":"daemon"},{"issue_id":".dotfiles-sj6","depends_on_id":".dotfiles-ckn","type":"blocks","created_at":"2025-12-26T20:54:09.66359-05:00","created_by":"daemon"}]}
{"id":".dotfiles-t5t","title":"Enable jj auto-update-stale configuration","description":"Add 'snapshot.auto-update-stale = true' to jj user config to reduce friction with stale workspace messages.\n\nWhy: When one workspace modifies a commit that another workspace has checked out, the second workspace becomes 'stale'. Without auto-update-stale, agents/developers must manually run 'jj workspace update-stale' which breaks flow.\n\nImplementation:\n- Add config to existing jj user config in dotfiles\n- Consider making this part of a jj config module for portability","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T08:44:13.446747-05:00","updated_at":"2025-12-29T10:28:00.38624-05:00","closed_at":"2025-12-29T10:28:00.38624-05:00","close_reason":"Added snapshot.auto-update-stale = true to home/programs/jujutsu.nix","labels":["config","jj","workspace"],"dependencies":[{"issue_id":".dotfiles-t5t","depends_on_id":".dotfiles-20n","type":"blocks","created_at":"2025-12-29T08:44:13.457311-05:00","created_by":"daemon"}]}
{"id":".dotfiles-t7f","title":"Shade: Shift key combinations not passed to terminal","description":"Shift key combinations fail in Shade's embedded terminal:\n- Cannot type ':' (Shift+;) to enter nvim command mode\n- Cannot type 'O' (Shift+o) for new line above\n- All shifted characters appear to fail (?, \", {, etc.)\n\nWorks correctly in:\n- Regular nvim in Ghostty\n- Regular nvim in Kitty\n- Previously worked when Shade used Kitty\n\nLikely cause: Shade's key event handling is not properly passing the Shift modifier to the PTY/terminal emulator.\n\nThis is blocking testing of the obsidian.nvim migration (.dotfiles-8nx.5).","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-07T16:07:12.179601-05:00","created_by":"seth","updated_at":"2026-01-07T16:07:12.179601-05:00"}
{"id":".dotfiles-u2l","title":"MegaNote Hammerspoon integration","description":"Integrate MegaNote (libghostty Swift app) with Hammerspoon for quick capture workflow.\n\nDone:\n- Created meganote.lua module with distributed notification IPC\n- Added Hyper+Shift+N binding for context-aware capture\n- Socket cleanup wrapper for nvim --listen\n- Smart toggle/launch lifecycle\n\nMegaNote auto-terminates when nvim exits, Hammerspoon relaunches on next capture.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T16:22:41.192571-05:00","updated_at":"2025-12-30T12:45:39.92267-05:00","closed_at":"2025-12-30T12:45:39.92267-05:00","close_reason":"Hammerspoon integration complete - meganote.lua module created, bindings updated","labels":["agent","workspace"]}
{"id":".dotfiles-u39","title":"Split lib/notifications/notifier.lua into smaller modules","description":"notifier.lua (978 lines) handles canvas creation, positioning, animation, overlay, app watching. Split into: notifier-canvas.lua (canvas building), notifier-position.lua (positioning logic), notifier-animation.lua (slide animations).","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:03:12.453317-05:00","updated_at":"2025-12-27T18:03:12.453317-05:00","labels":["architecture","hammerspoon","refactor"]}
{"id":".dotfiles-uho","title":"Reduce _G global state pollution","description":"Replace 7+ _G.* variables in notifier.lua with module-local M._state table. Also consolidate _G.C, _G.U, _G.N, _G.I, etc. in init.lua. Makes debugging easier and prevents name collisions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T18:02:31.21514-05:00","updated_at":"2026-01-02T10:15:29.308955-05:00","closed_at":"2026-01-02T10:15:29.308955-05:00","close_reason":"Removed duplicate _G.Hypers init from bindings.lua (hyper.lua is source of truth). Removed 28 lines of dead code from iphonesimulator context (unused local functions calling non-existent _G.info/dbg/note/success). Intentional REPL globals (_G.Spike, _G.CleanupConsole) left in place.","labels":["code-quality","hammerspoon"]}
{"id":".dotfiles-vd5","title":"[Phase 1] Create bin/get-selection Swift script","description":"Create Swift script using macOS Accessibility API to get selected text without clipboard. Query kAXSelectedTextAttribute, return JSON with selection, app info, window title, and URL for browsers.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-26T10:35:59.055742-05:00","updated_at":"2025-12-26T11:07:25.286524-05:00","closed_at":"2025-12-26T11:07:25.286524-05:00","close_reason":"Swift script created and tested - browser, terminal detection working","labels":["accessibility","phase-1","swift"]}
{"id":".dotfiles-wg1","title":"Add type annotations to public Hammerspoon functions","description":"Many functions lack ---@param and ---@return annotations, reducing LSP usefulness. Priority files: utils.lua (most functions unannotated), notification.lua, notifier.lua. Use LuaLS annotation format.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:02:59.468479-05:00","updated_at":"2025-12-27T18:02:59.468479-05:00","labels":["documentation","hammerspoon"]}
{"id":".dotfiles-wl6","title":"Hammerspoon Config Cleanup \u0026 Refactoring","description":"Epic for cleaning up and refactoring the Hammerspoon configuration. Addresses memory leaks, code smells, anti-patterns, and maintainability issues identified in deep analysis. See child tasks for specific issues.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-27T18:03:21.503178-05:00","updated_at":"2025-12-27T18:03:21.503178-05:00","labels":["epic","hammerspoon","refactor"]}
{"id":".dotfiles-wpc","title":"[Phase 2] Integrate selection.lua with capture workflow","description":"Replace clipboard-based context detection with selection.lua. Update lib/notes.lua and bindings.lua HYPER+shift+N flow.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":45,"created_at":"2025-12-26T10:35:59.358579-05:00","updated_at":"2025-12-26T13:00:28.849405-05:00","closed_at":"2025-12-26T13:00:28.849405-05:00","close_reason":"Integrated selection.lua with capture workflow. Replaced clipboard-based fallback with Accessibility API via Swift script. Fixed getSync() event loop blocking bug.","labels":["hammerspoon","phase-2"],"dependencies":[{"issue_id":".dotfiles-wpc","depends_on_id":".dotfiles-d8h","type":"blocks","created_at":"2025-12-26T10:35:59.359376-05:00","created_by":"daemon"},{"issue_id":".dotfiles-wpc","depends_on_id":".dotfiles-pvi","type":"blocks","created_at":"2025-12-26T10:35:59.359902-05:00","created_by":"daemon"}]}
