{"id":".dotfiles-0b9","title":"Fix notification database schema mismatch - missing 'action_taken' column in getRecent query","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-27T18:38:53.406366-05:00","updated_at":"2025-12-27T18:43:23.305967-05:00","closed_at":"2025-12-27T18:43:23.305967-05:00","close_reason":"Closed","labels":["database","hammerspoon"]}
{"id":".dotfiles-1ic","title":"Create Hammerspoon reload cleanup hook","description":"Add a central cleanup mechanism in init.lua that calls cleanup() on all modules before hs.reload(). Modules should register their cleanup functions. This ensures watchers, timers, and canvases are properly released.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T18:03:13.560943-05:00","updated_at":"2025-12-27T18:03:13.560943-05:00","labels":["architecture","hammerspoon","memory-leak"]}
{"id":".dotfiles-1rd","title":"Standardize module pattern across Hammerspoon config","description":"Inconsistent module patterns: some use 'local M = {}', others use 'local obj = {}' with unused __index. Standardize on simple 'local M = {}' pattern without unnecessary metatable setup. Remove unused M.__index and M.name declarations.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:02:43.284235-05:00","updated_at":"2025-12-27T18:02:43.284235-05:00","labels":["code-quality","hammerspoon"]}
{"id":".dotfiles-3ra","title":"Remove duplicate logging in notification hot path","description":"In notification.lua:382-388, both print() and U.log.nf() are called on every notification with similar format strings. Remove the print() call or consolidate to single logging approach.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:03:01.739539-05:00","updated_at":"2025-12-27T18:03:01.739539-05:00","labels":["hammerspoon","performance"]}
{"id":".dotfiles-4el","title":"Configure Hammerspoon PATH for Nix/Homebrew binaries","description":"Hammerspoon doesn't inherit shell PATH, requiring absolute paths to binaries (nvim, kitty, ghostty). Find a clean solution to inject Nix/Homebrew paths so we can use simple binary names instead of hardcoded paths like /opt/homebrew/bin/kitty or /run/current-system/sw/bin/nvim.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T11:10:46.837799-05:00","updated_at":"2025-12-26T12:23:12.803943-05:00","closed_at":"2025-12-26T12:23:12.803943-05:00","close_reason":"Implemented PATH injection via monkey-patched hs.task.new in overrides.lua. Nix generates nix_path.lua to ~/.local/share/hammerspoon/ on darwin-rebuild.","labels":["dx","hammerspoon","nix","path"]}
{"id":".dotfiles-5lx","title":"Fix obsidian.nvim deprecation warnings and API changes","description":"Fixed multiple issues: 1) Deprecated 'mappings' config replaced with 'callbacks.enter_note', 2) util module replaced with api module, 3) cursor_on_markdown_link() replaced with api.cursor_link(), 4) Added gr keybinding that works on frontmatter tags and body tags","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T17:06:58.233137-05:00","updated_at":"2025-12-27T17:07:03.819703-05:00","closed_at":"2025-12-27T17:07:03.819703-05:00","close_reason":"Fixed in config/nvim/lua/plugins/obsidian.lua and config/nvim/after/plugin/notes.lua","labels":["nvim","obsidian"]}
{"id":".dotfiles-5vb","title":"Add consistent error handling to pcall patterns","description":"Some pcall() calls properly check return values, others ignore them entirely. Example: notifier.lua:143 uses pcall without checking success. Standardize on 'local ok, err = pcall(...)' pattern and handle errors.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:02:45.083377-05:00","updated_at":"2025-12-27T18:02:45.083377-05:00","labels":["error-handling","hammerspoon"]}
{"id":".dotfiles-6bp","title":"[Phase 5] Add window position persistence","description":"Save/restore notes window position via hs.settings. Handle multi-monitor and off-screen scenarios.","status":"open","priority":3,"issue_type":"task","estimated_minutes":30,"created_at":"2025-12-26T10:35:59.656222-05:00","updated_at":"2025-12-26T10:35:59.656222-05:00","labels":["hammerspoon","phase-5","polish"],"dependencies":[{"issue_id":".dotfiles-6bp","depends_on_id":".dotfiles-ca8","type":"blocks","created_at":"2025-12-26T10:35:59.657071-05:00","created_by":"daemon"},{"issue_id":".dotfiles-6bp","depends_on_id":".dotfiles-ckn","type":"blocks","created_at":"2025-12-26T20:54:09.752167-05:00","created_by":"daemon"}]}
{"id":".dotfiles-8a7","title":"Extend Hammerspoon env injection for NOTES_HOME","description":"Extended nix_path.lua to export NIX_ENV table with critical env vars (NOTES_HOME, OBSIDIAN_HOME, NVIM_DB_HOME, DOTS, XDG_*). Updated overrides.lua to inject these into spawned processes. Fixes nvim config errors when launched via Hammerspoon hotkeys.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T17:06:46.105735-05:00","updated_at":"2025-12-27T17:06:51.241449-05:00","closed_at":"2025-12-27T17:06:51.241449-05:00","close_reason":"Implemented in home/default.nix, overrides.lua, and preflight.lua","labels":["env","hammerspoon","nix"]}
{"id":".dotfiles-8uo","title":"[Phase 3] Create nvim autocmd for daily note linking","description":"BufWritePost autocmd for captures/ files. Skip empty files. Append wikilink to daily note ## Captures section.\n\nImplementation complete - pending questions before final test:\n- Different separators in description? (currently using \" Â· \")\n- Include timestamp in description?\n- Truncate description at different length? (currently 60 chars)\n- Different fallback text? (currently \"Text capture\")","status":"closed","priority":2,"issue_type":"task","estimated_minutes":45,"created_at":"2025-12-26T10:35:59.457437-05:00","updated_at":"2025-12-26T17:41:02.320001-05:00","closed_at":"2025-12-26T17:41:02.320001-05:00","close_reason":"Implemented and tested. Fixed language detection, added source context to frontmatter, smart filenames, duplicate prevention, and simplified image capture entries.","labels":["nvim","obsidian","phase-3"],"dependencies":[{"issue_id":".dotfiles-8uo","depends_on_id":".dotfiles-wpc","type":"blocks","created_at":"2025-12-26T10:35:59.458333-05:00","created_by":"daemon"}]}
{"id":".dotfiles-91b","title":"Remove dead code from bindings.lua","description":"bindings.lua has ~200 lines of commented-out code (lines 151-192, 449-480, 485-641). Delete these blocks to improve maintainability. Also remove unused assertKeyAvailable function at line 662.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T18:02:31.980637-05:00","updated_at":"2025-12-27T18:02:31.980637-05:00","labels":["cleanup","code-quality","hammerspoon"]}
{"id":".dotfiles-b3r","title":"Improve function naming for clarity","description":"Several unclear function names: M.toggle() - toggle what?; findWindowByTitle() returns single window not list; tableCount() should use stdlib. Rename for intention-revealing names per clean code principles.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:03:00.429094-05:00","updated_at":"2025-12-27T18:03:00.429094-05:00","labels":["code-quality","hammerspoon"]}
{"id":".dotfiles-bww","title":"Fix nested timer accumulation in dismissNotification","description":"In notifier.lua:279-301, nested hs.timer.doAfter inside doUntil can orphan timers when dismissNotification is called rapidly. Store reference and cancel previous before creating new. Location: lib/notifications/notifier.lua dismissNotification()","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T18:02:17.898907-05:00","updated_at":"2025-12-27T18:02:17.898907-05:00","labels":["hammerspoon","memory-leak"]}
{"id":".dotfiles-ca8","title":"[Phase 3] Verify obsidian.nvim backlinks work","description":"Test obsidian.nvim backlinks between capture notes and daily notes. Verify navigation works.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":15,"created_at":"2025-12-26T10:35:59.557261-05:00","updated_at":"2025-12-26T20:50:13.101087-05:00","closed_at":"2025-12-26T20:50:13.101087-05:00","close_reason":"Verified and enhanced. Added note_frontmatter_func to preserve capture metadata, picker tag mappings, smart gf/\u003ccr\u003e mappings, and unified gr keybinding for tags/links/LSP references.","labels":["nvim","obsidian","phase-3"],"dependencies":[{"issue_id":".dotfiles-ca8","depends_on_id":".dotfiles-8uo","type":"blocks","created_at":"2025-12-26T10:35:59.558086-05:00","created_by":"daemon"}]}
{"id":".dotfiles-ckn","title":"[Phase 4] User testing and real-world usage validation","description":"Use the Notes \u0026 Capture System in daily workflow. Test:\n- Text capture from browser (verify app name, window title, language in frontmatter)\n- Text capture from terminal/nvim\n- Image capture flow\n- Daily note linking (verify no duplicates, proper formatting)\n- obsidian.nvim backlinks navigation\n- Unified gr keybinding (tags vs links vs LSP)\n- Smart \u003ccr\u003e and gf mappings\n\nReport any issues found for Phase 5 fixes.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-26T20:54:01.167553-05:00","updated_at":"2025-12-26T20:54:08.411674-05:00","labels":["phase-4","testing"]}
{"id":".dotfiles-cwn","title":"Fix application watcher never stopped on reload","description":"In lib/notifications/notifier.lua:316-333, the application watcher is started on module load but never stopped. Add stop logic to cleanup function and call it before hs.reload(). Location: notifier.lua setupAppWatcher()","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T18:02:16.760137-05:00","updated_at":"2025-12-27T18:02:16.760137-05:00","labels":["critical","hammerspoon","memory-leak"]}
{"id":".dotfiles-d8h","title":"[Phase 2] Create lib/interop/selection.lua wrapper","description":"Lua wrapper for bin/get-selection. Call via hs.task.new(), parse JSON, handle errors gracefully.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":30,"created_at":"2025-12-26T10:35:59.258017-05:00","updated_at":"2025-12-26T11:07:28.416287-05:00","closed_at":"2025-12-26T11:07:28.416287-05:00","close_reason":"Created lib/interop/selection.lua wrapper with async callback API","labels":["hammerspoon","lua","phase-2"],"dependencies":[{"issue_id":".dotfiles-d8h","depends_on_id":".dotfiles-vd5","type":"blocks","created_at":"2025-12-26T10:35:59.258897-05:00","created_by":"daemon"}]}
{"id":".dotfiles-dlr","title":"Add cleanup methods to notifier module","description":"Add M.cleanup() function to lib/notifications/notifier.lua that stops _G.notificationAppWatcher, deletes _G.notificationOverlay canvas, and clears all timer references. Critical for preventing memory leaks on reload.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-27T18:02:15.598605-05:00","updated_at":"2025-12-27T18:02:15.598605-05:00","labels":["critical","hammerspoon","memory-leak"]}
{"id":".dotfiles-dm7","title":"Notes \u0026 Capture System","description":"Unified note-taking and capture system integrating Hammerspoon, Neovim (obsidian.nvim), and a floating Kitty terminal window for seamless capture workflows across the system.\n\nGoals:\n- Quick capture of text/ideas from anywhere on the system\n- Context-aware capture (grab selected text + source metadata without clipboard pollution)\n- Floating notes window that persists and toggles cleanly\n- Integration with daily notes via obsidian.nvim\n\nArchitecture:\n- Floating notes terminal: Kitty with persistent nvim session\n- Main terminal: Ghostty (tmux) - unchanged\n- Window management: Hammerspoon toggle with previousApp restore\n- Context capture: Swift script via Accessibility API (no clipboard)\n- Note storage: Obsidian vault with obsidian.nvim","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-26T10:34:58.50616-05:00","updated_at":"2025-12-27T17:36:01.618571-05:00","closed_at":"2025-12-27T17:36:01.618571-05:00","close_reason":"Core features complete. Capture system fully functional: persistent nvim session, clipboard-free selection via Accessibility API, text/image capture workflows, daily note integration, obsidian.nvim backlinks. Phase 5 polish tasks remain open for future refinement.","labels":["hammerspoon","notes","nvim","obsidian"]}
{"id":".dotfiles-hr2","title":"Split watchers/notification.lua into smaller modules","description":"notification.lua (825 lines) has too many responsibilities. Split into: notification-observer.lua (AX observer), notification-matcher.lua (rule matching), notification-actions.lua (dismiss/redirect). Each module should have single responsibility.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:03:11.640881-05:00","updated_at":"2025-12-27T18:03:11.640881-05:00","labels":["architecture","hammerspoon","refactor"]}
{"id":".dotfiles-ivz","title":"[Phase 5] Error handling and edge cases","description":"Handle: Kitty not installed, nvim socket unresponsive, get-selection fails, directory not writable, window stuck state. Add logging and graceful degradation.","status":"open","priority":3,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-26T10:35:59.870144-05:00","updated_at":"2025-12-26T10:35:59.870144-05:00","labels":["hammerspoon","phase-5","polish"],"dependencies":[{"issue_id":".dotfiles-ivz","depends_on_id":".dotfiles-ca8","type":"blocks","created_at":"2025-12-26T10:35:59.871088-05:00","created_by":"daemon"},{"issue_id":".dotfiles-ivz","depends_on_id":".dotfiles-ckn","type":"blocks","created_at":"2025-12-26T20:54:09.575095-05:00","created_by":"daemon"}]}
{"id":".dotfiles-jod","title":"[Future] Create Neovide-based toggle as Kitty alternative","description":"Native macOS window alternative to Kitty terminal. Neovide already installed. Compare reliability and performance.","status":"closed","priority":4,"issue_type":"feature","estimated_minutes":120,"created_at":"2025-12-26T10:35:59.973888-05:00","updated_at":"2025-12-26T15:14:02.918563-05:00","closed_at":"2025-12-26T15:14:02.918563-05:00","close_reason":"Abandoned after testing - neovide socket reliability issues, sticking with Kitty","labels":["future","neovide"]}
{"id":".dotfiles-lp4","title":"Extract magic numbers to config.lua","description":"Multiple magic numbers in code: minHeight=100, maxHeight=400 in notifier.lua; depth limits of 6 and 8 in notification.lua tree traversal. Move to C.notifier.canvas.* and C.notifier.axTreeMaxDepth.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:02:44.2798-05:00","updated_at":"2025-12-27T18:02:44.2798-05:00","labels":["hammerspoon","maintainability"]}
{"id":".dotfiles-mkm","title":"Image capture context enrichment via recognition/OCR","description":"Enhance image captures with intelligent context extraction:\n\n- Detect frontmost app when screenshot is taken (app name, window title)\n- OCR text visible in the screenshot for searchable content\n- Image classification/summarization for descriptive filenames\n- Pass enriched context to the capture note frontmatter\n\nThis would enable smarter naming like '20251226-1730-github-pr-review.png' instead of generic timestamps, and make captures more searchable via extracted text.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-26T17:40:03.974062-05:00","updated_at":"2025-12-26T17:40:03.974062-05:00"}
{"id":".dotfiles-ngc","title":"[Phase 5] Code cleanup and refactoring for maintainability","description":"Review and refactor the Notes \u0026 Capture System code for maintainability:\n\nPotential areas to address:\n- lib/notes.lua: Large file, may need splitting into focused modules\n- lib/interop/scratchpad.lua: Complex toggle logic, could simplify\n- config/nvim/after/plugin/notes.lua: Growing autocmd file, review organization\n- Consolidate duplicate patterns across capture workflows\n- Add documentation/comments where logic is non-obvious\n- Review error handling consistency\n- Consider extracting shared utilities\n\nGoal: Make the codebase approachable for future modifications without deep context.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T17:35:54.678127-05:00","updated_at":"2025-12-27T17:35:54.678127-05:00","labels":["hammerspoon","nvim","phase-5","polish"]}
{"id":".dotfiles-pvi","title":"[Phase 1] Implement persistent nvim session with --remote","description":"Change scratchpad from spawning new nvim per-launch to single persistent session. First launch: nvim --listen /tmp/notes.sock. Subsequent: nvim --server ... --remote \u003cfile\u003e.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-26T10:35:59.156162-05:00","updated_at":"2025-12-26T12:51:24.113062-05:00","closed_at":"2025-12-26T12:51:24.113062-05:00","close_reason":"Implemented persistent nvim session with --listen/--server/--remote. Ghostty macOS fix discovered (use open -na instead of direct CLI).","labels":["hammerspoon","nvim","phase-1"]}
{"id":".dotfiles-qur","title":"Cache require() calls in notification hot paths","description":"In watchers/notification.lua, require('lib.notifications.db') and require('lib.notifications.menubar') are called inside handleNotification() on every notification. Move to module-level cache to reduce overhead.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T18:02:30.371012-05:00","updated_at":"2025-12-27T18:02:30.371012-05:00","labels":["hammerspoon","performance"]}
{"id":".dotfiles-sj6","title":"[Phase 5] Add smooth toggle animations","description":"Slide-in/slide-out animations for notes window toggle. Make configurable and disable-able.","status":"open","priority":3,"issue_type":"task","estimated_minutes":45,"created_at":"2025-12-26T10:35:59.769766-05:00","updated_at":"2025-12-26T10:35:59.769766-05:00","labels":["hammerspoon","phase-5","polish"],"dependencies":[{"issue_id":".dotfiles-sj6","depends_on_id":".dotfiles-ca8","type":"blocks","created_at":"2025-12-26T10:35:59.7707-05:00","created_by":"daemon"},{"issue_id":".dotfiles-sj6","depends_on_id":".dotfiles-ckn","type":"blocks","created_at":"2025-12-26T20:54:09.66359-05:00","created_by":"daemon"}]}
{"id":".dotfiles-u39","title":"Split lib/notifications/notifier.lua into smaller modules","description":"notifier.lua (978 lines) handles canvas creation, positioning, animation, overlay, app watching. Split into: notifier-canvas.lua (canvas building), notifier-position.lua (positioning logic), notifier-animation.lua (slide animations).","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:03:12.453317-05:00","updated_at":"2025-12-27T18:03:12.453317-05:00","labels":["architecture","hammerspoon","refactor"]}
{"id":".dotfiles-uho","title":"Reduce _G global state pollution","description":"Replace 7+ _G.* variables in notifier.lua with module-local M._state table. Also consolidate _G.C, _G.U, _G.N, _G.I, etc. in init.lua. Makes debugging easier and prevents name collisions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-27T18:02:31.21514-05:00","updated_at":"2025-12-27T18:02:31.21514-05:00","labels":["code-quality","hammerspoon"]}
{"id":".dotfiles-vd5","title":"[Phase 1] Create bin/get-selection Swift script","description":"Create Swift script using macOS Accessibility API to get selected text without clipboard. Query kAXSelectedTextAttribute, return JSON with selection, app info, window title, and URL for browsers.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-26T10:35:59.055742-05:00","updated_at":"2025-12-26T11:07:25.286524-05:00","closed_at":"2025-12-26T11:07:25.286524-05:00","close_reason":"Swift script created and tested - browser, terminal detection working","labels":["accessibility","phase-1","swift"]}
{"id":".dotfiles-wg1","title":"Add type annotations to public Hammerspoon functions","description":"Many functions lack ---@param and ---@return annotations, reducing LSP usefulness. Priority files: utils.lua (most functions unannotated), notification.lua, notifier.lua. Use LuaLS annotation format.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T18:02:59.468479-05:00","updated_at":"2025-12-27T18:02:59.468479-05:00","labels":["documentation","hammerspoon"]}
{"id":".dotfiles-wl6","title":"Hammerspoon Config Cleanup \u0026 Refactoring","description":"Epic for cleaning up and refactoring the Hammerspoon configuration. Addresses memory leaks, code smells, anti-patterns, and maintainability issues identified in deep analysis. See child tasks for specific issues.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-27T18:03:21.503178-05:00","updated_at":"2025-12-27T18:03:21.503178-05:00","labels":["epic","hammerspoon","refactor"]}
{"id":".dotfiles-wpc","title":"[Phase 2] Integrate selection.lua with capture workflow","description":"Replace clipboard-based context detection with selection.lua. Update lib/notes.lua and bindings.lua HYPER+shift+N flow.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":45,"created_at":"2025-12-26T10:35:59.358579-05:00","updated_at":"2025-12-26T13:00:28.849405-05:00","closed_at":"2025-12-26T13:00:28.849405-05:00","close_reason":"Integrated selection.lua with capture workflow. Replaced clipboard-based fallback with Accessibility API via Swift script. Fixed getSync() event loop blocking bug.","labels":["hammerspoon","phase-2"],"dependencies":[{"issue_id":".dotfiles-wpc","depends_on_id":".dotfiles-d8h","type":"blocks","created_at":"2025-12-26T10:35:59.359376-05:00","created_by":"daemon"},{"issue_id":".dotfiles-wpc","depends_on_id":".dotfiles-pvi","type":"blocks","created_at":"2025-12-26T10:35:59.359902-05:00","created_by":"daemon"}]}
