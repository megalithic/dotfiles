#!/usr/bin/env bash

# https://vaneyckt.io/posts/safer_bash_scripts_with_set_euxo_pipefail/
set -Eueo pipefail

[[ -f "${XDG_CONFIG_HOME}/zsh/lib/helpers.zsh" ]] && source "${XDG_CONFIG_HOME}/zsh/lib/helpers.zsh"

command cat <<EOF
${green}
â–‘
â–‘  â”Œâ”¬â”â”Œâ”€â”â”Œâ”€â”â”Œâ”€â”â”¬  â”¬â”Œâ”¬â”â”¬ â”¬â”¬â”Œâ”€â”
â–‘  â”‚â”‚â”‚â”œâ”¤ â”‚ â”¬â”œâ”€â”¤â”‚  â”‚ â”‚ â”œâ”€â”¤â”‚â”‚   :: bits & bobs, dots & things.
â–‘  â”´ â”´â””â”€â”˜â””â”€â”˜â”´ â”´â”´â”€â”˜â”´ â”´ â”´ â”´â”´â””â”€â”˜
â–‘  @megalithic ðŸ—¿
â–‘${reset}
EOF

if [ -d "$DOTS/.git" ]; then
  command cat <<EOF
${blue}â–‘  ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››ï››
â–‘
â–‘  $(git --git-dir "$DOTS/.git" --work-tree "$DOTS" log -n 1 --pretty=format:'%C(yellow)commit:  %h')
â–‘  $(git --git-dir "$DOTS/.git" --work-tree "$DOTS" log -n 1 --pretty=format:'%C(red)date:    %ad' --date=short)
â–‘  $(git --git-dir "$DOTS/.git" --work-tree "$DOTS" log -n 1 --pretty=format:'%C(cyan)author:  %an')
â–‘  $(git --git-dir "$DOTS/.git" --work-tree "$DOTS" log -n 1 --pretty=format:'%C(green)message: %s')
â–‘
${reset}
EOF
fi
